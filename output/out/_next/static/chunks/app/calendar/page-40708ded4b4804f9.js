(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[85],{1028:(e,t,a)=>{"use strict";a.d(t,{J:()=>r});var l=a(4054),i=a(9221),n=a(6857);function r(){let{signIn:e,signOut:t}=(0,i.BG)(),a=(0,l.IT)(n.F.users.getCurrentUser),r=(0,l.n_)(n.F.users.createOrUpdateUser),s=(0,l.n_)(n.F.users.updateLastActive),c=null!=a,d=void 0===a,o=(null==a?void 0:a._id)||null,m=async()=>{if(c)try{await s()}catch(e){console.error("Update last active error:",e)}};return{user:a,userId:o,isAuthenticated:c,isLoading:d,signIn:async(t,a)=>{try{return await e("password",{email:t,password:a}),{success:!0}}catch(e){return console.error("Sign in error:",e),{success:!1,error:e instanceof Error?e.message:"Sign in failed"}}},signUp:async(t,a,l)=>{try{return await e("password",{email:t,password:a,flow:"signUp"}),l&&await r({name:l,email:t}),{success:!0}}catch(e){return console.error("Sign up error:",e),{success:!1,error:e instanceof Error?e.message:"Sign up failed"}}},signOut:async()=>{try{return await t(),{success:!0}}catch(e){return console.error("Sign out error:",e),{success:!1,error:e instanceof Error?e.message:"Sign out failed"}}},createUserProfile:async e=>{try{return await r(e),{success:!0}}catch(e){return console.error("Create user profile error:",e),{success:!1,error:e instanceof Error?e.message:"Failed to create user profile"}}},markUserActive:m}}},1265:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>es});var l=a(5853),i=a(2115),n=a(285),r=a(6695),s=a(6126),c=a(2523),d=a(5057),o=a(8539),m=a(9409),u=a(4165),h=a(64),p=a(9434);let v=h.bL,g=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,l.Y)(h.B8,{ref:t,className:(0,p.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",a),...i})});g.displayName=h.B8.displayName;let f=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,l.Y)(h.l9,{ref:t,className:(0,p.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",a),...i})});f.displayName=h.l9.displayName;let y=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,l.Y)(h.UC,{ref:t,className:(0,p.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...i})});y.displayName=h.UC.displayName;var N=a(8390),Y=a(8098),b=a(8271),x=a(8186),D=a(7082),F=a(9069),w=a(9829),C=a(8046),A=a(7223),k=a(3764),T=a(3300),S=a(8763),E=a(7648),I=a(1203),O=a(4054),_=a(6857),J=a(1028);let M=[{value:"bills",label:"Bills",icon:N.A,description:"Monthly bills and payments"},{value:"health",label:"Health",icon:Y.A,description:"Medical appointments and health reminders"},{value:"maintenance",label:"Maintenance",icon:b.A,description:"Vehicle, home, and equipment maintenance"},{value:"personal",label:"Personal",icon:x.A,description:"Personal goals and activities"},{value:"work",label:"Work",icon:D.A,description:"Work-related recurring tasks"}],R=[{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"monthly",label:"Monthly"},{value:"yearly",label:"Yearly"}],$=[{value:"bill",label:"Bill Payment"},{value:"appointment",label:"Appointment"},{value:"reminder",label:"Reminder"},{value:"task",label:"Task"},{value:"maintenance",label:"Maintenance"}],z=[{value:0,label:"Sunday"},{value:1,label:"Monday"},{value:2,label:"Tuesday"},{value:3,label:"Wednesday"},{value:4,label:"Thursday"},{value:5,label:"Friday"},{value:6,label:"Saturday"}];function L(e){var t,a,h;let{onClose:p}=e,{userId:Y}=(0,J.J)(),[b,x]=(0,i.useState)(!1),[D,L]=(0,i.useState)(null),[j,U]=(0,i.useState)(!1),[q,P]=(0,i.useState)(null),[W,B]=(0,i.useState)({name:"",description:"",category:"bills",template:{title:"",type:"bill",recurring:{frequency:"monthly",interval:1,daysOfWeek:[],dayOfMonth:1},defaultReminders:[{minutes:1440,type:"notification"}],metadata:{amount:void 0,provider:"",accountNumber:""}}}),[V,G]=(0,i.useState)({numberOfOccurrences:12,startDate:new Date().toISOString().split("T")[0],calendarId:""}),Z=(0,O.IT)(_.F.lifeTemplates.getUserTemplates,Y?{}:"skip"),H=(0,O.IT)(_.F.customCalendars.getUserCalendars,Y?{}:"skip"),K=(0,O.n_)(_.F.lifeTemplates.createTemplate),Q=(0,O.n_)(_.F.lifeTemplates.updateTemplate),X=(0,O.n_)(_.F.lifeTemplates.deleteTemplate),ee=(0,O.n_)(_.F.lifeTemplates.createEventsFromTemplate),et=(0,O.n_)(_.F.lifeTemplates.initializeDefaultTemplates),ea=()=>{B({name:"",description:"",category:"bills",template:{title:"",type:"bill",recurring:{frequency:"monthly",interval:1,daysOfWeek:[],dayOfMonth:1},defaultReminders:[{minutes:1440,type:"notification"}],metadata:{amount:void 0,provider:"",accountNumber:""}}}),L(null)},el=async()=>{if(W.name.trim()&&W.template.title.trim())try{await K({name:W.name.trim(),description:W.description.trim()||void 0,category:W.category,template:{...W.template,metadata:W.template.metadata.amount?W.template.metadata:void 0}}),ea(),x(!1)}catch(e){console.error("Failed to create template:",e)}},ei=async()=>{if(D&&W.name.trim())try{await Q({templateId:D._id,name:W.name.trim(),description:W.description.trim()||void 0,category:W.category,template:{...W.template,metadata:W.template.metadata.amount?W.template.metadata:void 0}}),ea(),x(!1)}catch(e){console.error("Failed to update template:",e)}},en=e=>{L(e),B({name:e.name,description:e.description||"",category:e.category,template:{...e.template,metadata:e.template.metadata||{amount:void 0,provider:"",accountNumber:""}}}),x(!0)},er=async e=>{if(confirm("Are you sure you want to delete this template?"))try{await X({templateId:e})}catch(e){console.error("Failed to delete template:",e)}},es=async e=>{try{await Q({templateId:e._id,isActive:!e.isActive})}catch(e){console.error("Failed to toggle template:",e)}},ec=e=>{var t;P(e),G({numberOfOccurrences:12,startDate:new Date().toISOString().split("T")[0],calendarId:(null==H||null==(t=H[0])?void 0:t._id)||""}),U(!0)},ed=async()=>{if(q&&V.calendarId)try{await ee({templateId:q._id,calendarId:V.calendarId,startDate:new Date(V.startDate).getTime(),numberOfOccurrences:V.numberOfOccurrences}),U(!1),P(null)}catch(e){console.error("Failed to create events from template:",e)}},eo=async()=>{try{await et()}catch(e){console.error("Failed to initialize default templates:",e)}},em=e=>{let{frequency:t,interval:a,daysOfWeek:l,dayOfMonth:i}=e;if("weekly"===t&&(null==l?void 0:l.length)){let e=l.map(e=>{var t;return null==(t=z.find(t=>t.value===e))?void 0:t.label}).join(", ");return"Every ".concat(a>1?"".concat(a," weeks"):"week"," on ").concat(e)}return"monthly"===t?"Every ".concat(a>1?"".concat(a," months"):"month"," on day ").concat(i):"yearly"===t?"Every ".concat(a>1?"".concat(a," years"):"year"):"Every ".concat(a>1?"".concat(a," ").concat(t):t.slice(0,-2))};return(0,l.FD)("div",{className:"space-y-6",children:[(0,l.FD)("div",{className:"flex items-center justify-between",children:[(0,l.FD)("div",{className:"flex items-center gap-2",children:[(0,l.Y)(F.A,{className:"w-5 h-5 text-purple-600"}),(0,l.Y)("h3",{className:"font-semibold",children:"Life Templates"}),(0,l.FD)(s.E,{variant:"secondary",className:"text-xs",children:[(null==Z?void 0:Z.filter(e=>e.isActive).length)||0," active"]})]}),(0,l.FD)("div",{className:"flex gap-2",children:[(!Z||0===Z.length)&&(0,l.FD)(n.$,{variant:"outline",size:"sm",onClick:eo,className:"gap-2",children:[(0,l.Y)(w.A,{className:"w-3 h-3"}),"Add Defaults"]}),(0,l.FD)(u.lG,{open:b,onOpenChange:x,children:[(0,l.Y)(u.zM,{asChild:!0,children:(0,l.FD)(n.$,{size:"sm",className:"gap-2",onClick:ea,children:[(0,l.Y)(C.A,{className:"w-4 h-4"}),"Create Template"]})}),(0,l.FD)(u.Cf,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,l.Y)(u.c7,{children:(0,l.FD)(u.L3,{className:"flex items-center gap-2",children:[(0,l.Y)(F.A,{className:"w-5 h-5"}),D?"Edit Template":"Create Life Template"]})}),(0,l.FD)(v,{defaultValue:"basic",className:"w-full",children:[(0,l.FD)(g,{className:"grid w-full grid-cols-3",children:[(0,l.Y)(f,{value:"basic",children:"Basic Info"}),(0,l.Y)(f,{value:"recurring",children:"Recurring"}),(0,l.Y)(f,{value:"advanced",children:"Advanced"})]}),(0,l.FD)(y,{value:"basic",className:"space-y-4",children:[(0,l.FD)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.FD)("div",{children:[(0,l.Y)(d.J,{htmlFor:"template-name",children:"Template Name"}),(0,l.Y)(c.p,{id:"template-name",value:W.name,onChange:e=>B(t=>({...t,name:e.target.value})),placeholder:"Monthly Bills"})]}),(0,l.FD)("div",{children:[(0,l.Y)(d.J,{htmlFor:"category",children:"Category"}),(0,l.FD)(m.l6,{value:W.category,onValueChange:e=>B(t=>({...t,category:e})),children:[(0,l.Y)(m.bq,{children:(0,l.Y)(m.yv,{})}),(0,l.Y)(m.gC,{children:M.map(e=>(0,l.Y)(m.eb,{value:e.value,children:(0,l.FD)("div",{className:"flex items-center gap-2",children:[(0,l.Y)(e.icon,{className:"w-4 h-4"}),(0,l.FD)("div",{children:[(0,l.Y)("div",{className:"font-medium",children:e.label}),(0,l.Y)("div",{className:"text-xs text-slate-500",children:e.description})]})]})},e.value))})]})]})]}),(0,l.FD)("div",{children:[(0,l.Y)(d.J,{htmlFor:"template-description",children:"Description"}),(0,l.Y)(o.T,{id:"template-description",value:W.description,onChange:e=>B(t=>({...t,description:e.target.value})),placeholder:"Template description...",rows:2})]}),(0,l.FD)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.FD)("div",{children:[(0,l.Y)(d.J,{htmlFor:"event-title",children:"Event Title"}),(0,l.Y)(c.p,{id:"event-title",value:W.template.title,onChange:e=>B(t=>({...t,template:{...t.template,title:e.target.value}})),placeholder:"Electric Bill Payment"})]}),(0,l.FD)("div",{children:[(0,l.Y)(d.J,{htmlFor:"event-type",children:"Event Type"}),(0,l.FD)(m.l6,{value:W.template.type,onValueChange:e=>B(t=>({...t,template:{...t.template,type:e}})),children:[(0,l.Y)(m.bq,{children:(0,l.Y)(m.yv,{})}),(0,l.Y)(m.gC,{children:$.map(e=>(0,l.Y)(m.eb,{value:e.value,children:e.label},e.value))})]})]})]})]}),(0,l.FD)(y,{value:"recurring",className:"space-y-4",children:[(0,l.FD)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.FD)("div",{children:[(0,l.Y)(d.J,{children:"Frequency"}),(0,l.FD)(m.l6,{value:W.template.recurring.frequency,onValueChange:e=>B(t=>({...t,template:{...t.template,recurring:{...t.template.recurring,frequency:e}}})),children:[(0,l.Y)(m.bq,{children:(0,l.Y)(m.yv,{})}),(0,l.Y)(m.gC,{children:R.map(e=>(0,l.Y)(m.eb,{value:e.value,children:e.label},e.value))})]})]}),(0,l.FD)("div",{children:[(0,l.Y)(d.J,{htmlFor:"interval",children:"Interval"}),(0,l.Y)(c.p,{id:"interval",type:"number",min:"1",value:W.template.recurring.interval,onChange:e=>B(t=>({...t,template:{...t.template,recurring:{...t.template.recurring,interval:parseInt(e.target.value)||1}}})),placeholder:"1"})]})]}),"weekly"===W.template.recurring.frequency&&(0,l.FD)("div",{children:[(0,l.Y)(d.J,{children:"Days of Week"}),(0,l.Y)("div",{className:"grid grid-cols-4 gap-2 mt-2",children:z.map(e=>{var t;return(0,l.FD)("div",{className:"flex items-center space-x-2",children:[(0,l.Y)("input",{type:"checkbox",id:"day-".concat(e.value),checked:(null==(t=W.template.recurring.daysOfWeek)?void 0:t.includes(e.value))||!1,onChange:t=>{let a=W.template.recurring.daysOfWeek||[];t.target.checked?B(t=>({...t,template:{...t.template,recurring:{...t.template.recurring,daysOfWeek:[...a,e.value]}}})):B(t=>({...t,template:{...t.template,recurring:{...t.template.recurring,daysOfWeek:a.filter(t=>t!==e.value)}}}))},className:"rounded border-gray-300"}),(0,l.Y)(d.J,{htmlFor:"day-".concat(e.value),className:"text-sm",children:e.label.slice(0,3)})]},e.value)})})]}),"monthly"===W.template.recurring.frequency&&(0,l.FD)("div",{children:[(0,l.Y)(d.J,{htmlFor:"day-of-month",children:"Day of Month"}),(0,l.Y)(c.p,{id:"day-of-month",type:"number",min:"1",max:"31",value:W.template.recurring.dayOfMonth,onChange:e=>B(t=>({...t,template:{...t.template,recurring:{...t.template.recurring,dayOfMonth:parseInt(e.target.value)||1}}}))})]})]}),(0,l.FD)(y,{value:"advanced",className:"space-y-4",children:["bill"===W.template.type&&(0,l.FD)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.FD)("div",{children:[(0,l.Y)(d.J,{htmlFor:"amount",children:"Amount"}),(0,l.Y)(c.p,{id:"amount",type:"number",step:"0.01",value:(null==(t=W.template.metadata)?void 0:t.amount)||"",onChange:e=>B(t=>({...t,template:{...t.template,metadata:{...t.template.metadata,amount:parseFloat(e.target.value)||void 0}}})),placeholder:"0.00"})]}),(0,l.FD)("div",{children:[(0,l.Y)(d.J,{htmlFor:"provider",children:"Provider"}),(0,l.Y)(c.p,{id:"provider",value:(null==(a=W.template.metadata)?void 0:a.provider)||"",onChange:e=>B(t=>({...t,template:{...t.template,metadata:{...t.template.metadata,provider:e.target.value}}})),placeholder:"Electric Company"})]})]}),(0,l.FD)("div",{children:[(0,l.Y)(d.J,{children:"Default Reminders"}),(0,l.FD)("div",{className:"space-y-2 mt-2",children:[null==(h=W.template.defaultReminders)?void 0:h.map((e,t)=>(0,l.FD)("div",{className:"flex items-center gap-2",children:[(0,l.Y)(c.p,{type:"number",value:e.minutes,onChange:a=>{let l=[...W.template.defaultReminders||[]];l[t]={...e,minutes:parseInt(a.target.value)||0},B(e=>({...e,template:{...e.template,defaultReminders:l}}))},className:"w-24"}),(0,l.Y)("span",{className:"text-sm text-slate-500",children:"minutes before"}),(0,l.Y)(n.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>{var e;let a=(null==(e=W.template.defaultReminders)?void 0:e.filter((e,a)=>a!==t))||[];B(e=>({...e,template:{...e.template,defaultReminders:a}}))},children:(0,l.Y)(A.A,{className:"w-3 h-3"})})]},t)),(0,l.FD)(n.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{let e=[...W.template.defaultReminders||[],{minutes:60,type:"notification"}];B(t=>({...t,template:{...t.template,defaultReminders:e}}))},className:"gap-2",children:[(0,l.Y)(C.A,{className:"w-3 h-3"}),"Add Reminder"]})]})]})]})]}),(0,l.FD)("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[(0,l.Y)(n.$,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),(0,l.FD)(n.$,{onClick:D?ei:el,children:[D?"Update":"Create"," Template"]})]})]})]})]})]}),(0,l.Y)("div",{className:"space-y-3",children:Z&&Z.length>0?Z.map(e=>{var t;let a=M.find(t=>t.value===e.category),i=(null==a?void 0:a.icon)||F.A;return(0,l.Y)(r.Zp,{className:"transition-colors ".concat(e.isActive?"":"opacity-75"),children:(0,l.Y)(r.Wu,{className:"p-4",children:(0,l.FD)("div",{className:"flex items-start gap-3",children:[(0,l.Y)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center ".concat(e.isActive?"bg-purple-100 text-purple-600":"bg-slate-100 text-slate-400"),children:(0,l.Y)(i,{className:"w-5 h-5"})}),(0,l.FD)("div",{className:"flex-1 min-w-0",children:[(0,l.FD)("div",{className:"flex items-start justify-between",children:[(0,l.FD)("div",{children:[(0,l.FD)("h4",{className:"font-medium flex items-center gap-2",children:[e.name,(0,l.Y)(s.E,{variant:e.isActive?"default":"secondary",className:"text-xs",children:e.isActive?"Active":"Inactive"})]}),e.description&&(0,l.Y)("p",{className:"text-sm text-slate-600 mt-1",children:e.description})]}),(0,l.FD)("div",{className:"flex gap-1",children:[(0,l.Y)(n.$,{variant:"ghost",size:"sm",onClick:()=>es(e),className:"p-1 h-auto",title:e.isActive?"Deactivate":"Activate",children:e.isActive?(0,l.Y)(k.A,{className:"w-3 h-3"}):(0,l.Y)(T.A,{className:"w-3 h-3"})}),(0,l.Y)(n.$,{variant:"ghost",size:"sm",onClick:()=>ec(e),className:"p-1 h-auto text-purple-600",title:"Generate Events",children:(0,l.Y)(w.A,{className:"w-3 h-3"})}),(0,l.Y)(n.$,{variant:"ghost",size:"sm",onClick:()=>en(e),className:"p-1 h-auto",children:(0,l.Y)(S.A,{className:"w-3 h-3"})}),(0,l.Y)(n.$,{variant:"ghost",size:"sm",onClick:()=>er(e._id),className:"p-1 h-auto text-red-600 hover:text-red-700",children:(0,l.Y)(A.A,{className:"w-3 h-3"})})]})]}),(0,l.FD)("div",{className:"mt-2 space-y-1",children:[(0,l.FD)("div",{className:"text-sm text-slate-700",children:[(0,l.Y)("strong",{children:"Event:"})," ",e.template.title]}),(0,l.FD)("div",{className:"text-sm text-slate-600",children:[(0,l.Y)(E.A,{className:"w-3 h-3 inline mr-1"}),em(e.template.recurring)]}),(null==(t=e.template.metadata)?void 0:t.amount)&&(0,l.FD)("div",{className:"text-sm text-slate-600",children:[(0,l.Y)(N.A,{className:"w-3 h-3 inline mr-1"}),"$",e.template.metadata.amount.toFixed(2),e.template.metadata.provider&&" - ".concat(e.template.metadata.provider)]})]})]})]})})},e._id)}):(0,l.FD)("div",{className:"text-center text-slate-500 py-8",children:[(0,l.Y)(F.A,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),(0,l.Y)("div",{className:"text-sm",children:"No life templates created yet"}),(0,l.Y)("div",{className:"text-xs mt-1",children:"Create templates to automate recurring events"})]})}),(0,l.Y)(u.lG,{open:j,onOpenChange:U,children:(0,l.FD)(u.Cf,{className:"max-w-md",children:[(0,l.Y)(u.c7,{children:(0,l.FD)(u.L3,{className:"flex items-center gap-2",children:[(0,l.Y)(w.A,{className:"w-5 h-5 text-purple-600"}),"Generate Events"]})}),q&&(0,l.FD)("div",{className:"space-y-4",children:[(0,l.FD)("div",{className:"bg-slate-50 p-3 rounded-lg",children:[(0,l.Y)("h4",{className:"font-medium text-sm",children:q.name}),(0,l.FD)("p",{className:"text-xs text-slate-600 mt-1",children:['Will create: "',q.template.title,'"']}),(0,l.Y)("p",{className:"text-xs text-slate-600",children:em(q.template.recurring)})]}),(0,l.FD)("div",{children:[(0,l.Y)(d.J,{htmlFor:"target-calendar",children:"Target Calendar"}),(0,l.FD)(m.l6,{value:V.calendarId,onValueChange:e=>G(t=>({...t,calendarId:e})),children:[(0,l.Y)(m.bq,{children:(0,l.Y)(m.yv,{placeholder:"Select calendar"})}),(0,l.Y)(m.gC,{children:null==H?void 0:H.map(e=>(0,l.Y)(m.eb,{value:e._id,children:(0,l.FD)("div",{className:"flex items-center gap-2",children:[(0,l.Y)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),e.name]})},e._id))})]})]}),(0,l.FD)("div",{children:[(0,l.Y)(d.J,{htmlFor:"start-date",children:"Start Date"}),(0,l.Y)(c.p,{id:"start-date",type:"date",value:V.startDate,onChange:e=>G(t=>({...t,startDate:e.target.value}))})]}),(0,l.FD)("div",{children:[(0,l.Y)(d.J,{htmlFor:"occurrences",children:"Number of Occurrences"}),(0,l.Y)(c.p,{id:"occurrences",type:"number",min:"1",max:"24",value:V.numberOfOccurrences,onChange:e=>G(t=>({...t,numberOfOccurrences:parseInt(e.target.value)||1}))}),(0,l.FD)("p",{className:"text-xs text-slate-500 mt-1",children:["Creates ",V.numberOfOccurrences," future events"]})]}),(0,l.FD)("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[(0,l.Y)(n.$,{variant:"outline",onClick:()=>U(!1),children:"Cancel"}),(0,l.FD)(n.$,{onClick:ed,className:"gap-2",children:[(0,l.Y)(I.A,{className:"w-4 h-4"}),"Generate Events"]})]})]})]})})]})}var j=a(207),U=a(8224),q=a(1920),P=a(1721),W=a(286),B=a(4601),V=a(8875),G=a(7607),Z=a(4607),H=a(8376),K=a(965),Q=a(3158),X=a(3662),ee=a(1133),et=a(9053),ea=a(6874),el=a.n(ea);function ei(){var e,t;let[a,c]=(0,i.useState)(new Date),[d,o]=(0,i.useState)("month"),[m,h]=(0,i.useState)([]),[p,w]=(0,i.useState)(!1),[k,T]=(0,i.useState)(!1),[I,M]=(0,i.useState)(null),[R,$]=(0,i.useState)(!1),[z,et]=(0,i.useState)(null),[ea,ei]=(0,i.useState)(!1),[es,ec]=(0,i.useState)(null),{userId:ed}=(0,J.J)(),eo=(0,O.IT)(_.F.customCalendars.getUserCalendars,ed?{}:"skip"),em=(0,O.IT)(_.F.events.getUserEvents,ed?{startDate:new Date((e=a).getFullYear(),e.getMonth(),1).getTime(),endDate:new Date((t=a).getFullYear(),t.getMonth()+1,0,23,59,59).getTime()}:"skip"),eu=(0,O.IT)(_.F.events.getUpcomingEvents,ed?{daysAhead:7,limit:5}:"skip"),eh=(0,O.IT)(_.F.events.getBills,ed?{year:a.getFullYear(),month:a.getMonth()+1}:"skip");(0,O.IT)(_.F.lifeTemplates.getUserTemplates,ed?{}:"skip");let ep=(0,O.n_)(_.F.customCalendars.createCalendar),ev=(0,O.n_)(_.F.events.createEvent),eg=(0,O.n_)(_.F.events.updateEvent),ef=(0,O.n_)(_.F.events.deleteEvent),ey=(0,O.n_)(_.F.customCalendars.initializeDefaultCalendars);(0,O.n_)(_.F.events.updateEvent),(0,i.useEffect)(()=>{ed&&(null==eo?void 0:eo.length)===0&&ey()},[ed,eo,ey]),(0,i.useEffect)(()=>{eo&&0===m.length&&h(eo.filter(e=>e.isVisible).map(e=>e._id))},[eo,m]);let eN=[{id:"home",label:"Home",icon:x.A,href:"/home"},{id:"activity",label:"Activity",icon:j.A,href:"/activity"},{id:"chat",label:"Chat",icon:U.A,href:"/chat"},{id:"calendar",label:"Calendar",icon:q.A,href:"/calendar",active:!0},{id:"profile",label:"Profile",icon:P.A,href:"/profile"}],eY=e=>{if(!em)return[];let t=e.toISOString().split("T")[0];return em.filter(e=>new Date(e.startDate).toISOString().split("T")[0]===t&&m.includes(e.calendarId))},eb=e=>{let t=new Date(a);t.setMonth(a.getMonth()+("next"===e?1:-1)),c(t)},ex=e=>{h(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},eD=async e=>{try{await ev(e),w(!1)}catch(e){console.error("Failed to create event:",e)}},eF=async(e,t)=>{try{await eg({eventId:e,...t}),M(null),w(!1),$(!1)}catch(e){console.error("Failed to update event:",e)}},ew=async e=>{try{await ef({eventId:e}),ei(!1),ec(null),$(!1)}catch(e){console.error("Failed to delete event:",e)}},eC=e=>{et(e),$(!0)},eA=e=>{M(e),$(!1),w(!0)},ek=e=>{ec(e),ei(!0)},eT=e=>{let t=null==eo?void 0:eo.find(t=>t._id===e);return(null==t?void 0:t.color)||"#3b82f6"},eS=e=>({personal:P.A,work:D.A,health:Y.A,finance:N.A,family:W.A})[e]||q.A,eE=e=>({event:"bg-blue-100 text-blue-800",task:"bg-green-100 text-green-800",reminder:"bg-yellow-100 text-yellow-800",bill:"bg-red-100 text-red-800",birthday:"bg-purple-100 text-purple-800",appointment:"bg-indigo-100 text-indigo-800"})[e]||"bg-gray-100 text-gray-800";return(0,l.FD)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[(0,l.Y)("nav",{className:"bg-white/80 backdrop-blur-sm border-b border-slate-200 sticky top-0 z-50",children:(0,l.Y)("div",{className:"container mx-auto px-4",children:(0,l.FD)("div",{className:"flex items-center justify-between h-16",children:[(0,l.FD)("div",{className:"flex items-center gap-4",children:[(0,l.FD)("div",{className:"flex items-center gap-3",children:[(0,l.Y)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:(0,l.Y)(B.A,{className:"w-5 h-5 text-white"})}),(0,l.Y)("h1",{className:"text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"MyAi"})]}),(0,l.Y)("div",{className:"hidden md:flex items-center gap-1",children:eN.map(e=>{let t=e.icon;return(0,l.Y)(el(),{href:e.href,children:(0,l.FD)(n.$,{variant:e.active?"secondary":"ghost",className:"gap-2 ".concat(e.active?"bg-blue-50 text-blue-700":""),children:[(0,l.Y)(t,{className:"w-4 h-4"}),e.label]})},e.id)})})]}),(0,l.FD)("div",{className:"flex items-center gap-3",children:[(0,l.Y)(n.$,{variant:"ghost",size:"sm",children:(0,l.Y)(b.A,{className:"w-4 h-4"})}),(0,l.Y)("div",{className:"w-8 h-8 bg-slate-200 rounded-full flex items-center justify-center",children:(0,l.Y)(P.A,{className:"w-4 h-4 text-slate-600"})})]})]})})}),(0,l.FD)("div",{className:"container mx-auto px-4 py-8",children:[(0,l.Y)("div",{className:"mb-8",children:(0,l.FD)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.FD)("div",{children:[(0,l.Y)("h1",{className:"text-3xl font-bold text-slate-800",children:"Enhanced Calendar"}),(0,l.Y)("p",{className:"text-slate-600",children:"Manage events, tasks, bills, and life schedules"})]}),(0,l.FD)("div",{className:"flex items-center gap-3",children:[(0,l.FD)(u.lG,{open:k,onOpenChange:T,children:[(0,l.Y)(u.zM,{asChild:!0,children:(0,l.FD)(n.$,{variant:"outline",className:"gap-2",children:[(0,l.Y)(V.A,{className:"w-4 h-4"}),"New Calendar"]})}),(0,l.FD)(u.Cf,{children:[(0,l.Y)(u.c7,{children:(0,l.Y)(u.L3,{children:"Create New Calendar"})}),(0,l.Y)(er,{onSubmit:ep,onClose:()=>T(!1)})]})]}),(0,l.FD)(u.lG,{open:p,onOpenChange:w,children:[(0,l.Y)(u.zM,{asChild:!0,children:(0,l.FD)(n.$,{className:"gap-2",children:[(0,l.Y)(C.A,{className:"w-4 h-4"}),"New Event"]})}),(0,l.FD)(u.Cf,{className:"max-w-2xl",children:[(0,l.Y)(u.c7,{children:(0,l.Y)(u.L3,{children:I?"Edit Event":"Create New Event"})}),(0,l.Y)(en,{calendars:eo||[],initialData:I,onSubmit:e=>{I?eF(I._id,e):eD(e)},onClose:()=>{w(!1),M(null)}})]})]})]})]})}),(0,l.FD)("div",{className:"grid lg:grid-cols-4 gap-8",children:[(0,l.FD)("div",{className:"lg:col-span-1 space-y-6",children:[(0,l.FD)(r.Zp,{children:[(0,l.Y)(r.aR,{children:(0,l.FD)(r.ZB,{className:"flex items-center gap-2",children:[(0,l.Y)(q.A,{className:"w-5 h-5"}),"My Calendars"]})}),(0,l.Y)(r.Wu,{children:(0,l.Y)("div",{className:"space-y-3",children:null==eo?void 0:eo.map(e=>{let t=eS(e.category),a=m.includes(e._id);return(0,l.FD)("div",{className:"flex items-center gap-3",children:[(0,l.Y)(n.$,{variant:"ghost",size:"sm",className:"p-1",onClick:()=>ex(e._id),children:a?(0,l.Y)(G.A,{className:"w-4 h-4"}):(0,l.Y)(Z.A,{className:"w-4 h-4 opacity-50"})}),(0,l.Y)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.color}}),(0,l.FD)("div",{className:"flex-1 min-w-0",children:[(0,l.FD)("div",{className:"flex items-center gap-2",children:[(0,l.Y)(t,{className:"w-4 h-4"}),(0,l.Y)("span",{className:"text-sm font-medium truncate",children:e.name})]}),e.description&&(0,l.Y)("p",{className:"text-xs text-slate-500 truncate",children:e.description})]})]},e._id)})})})]}),(0,l.FD)(r.Zp,{children:[(0,l.Y)(r.aR,{children:(0,l.Y)(r.ZB,{children:"Quick Access"})}),(0,l.Y)(r.Wu,{children:(0,l.FD)(v,{defaultValue:"upcoming",className:"w-full",children:[(0,l.FD)(g,{className:"grid w-full grid-cols-3",children:[(0,l.Y)(f,{value:"upcoming",children:"Upcoming"}),(0,l.Y)(f,{value:"bills",children:"Bills"}),(0,l.Y)(f,{value:"tasks",children:"Tasks"})]}),(0,l.FD)(y,{value:"upcoming",className:"space-y-3 mt-4",children:[null==eu?void 0:eu.map(e=>(0,l.FD)("div",{className:"flex items-start gap-3 p-2 bg-slate-50 rounded-lg",children:[(0,l.Y)("div",{className:"w-3 h-3 rounded-full mt-1",style:{backgroundColor:eT(e.calendarId)}}),(0,l.FD)("div",{className:"flex-1 min-w-0",children:[(0,l.Y)("div",{className:"text-sm font-medium truncate",children:e.title}),(0,l.FD)("div",{className:"text-xs text-slate-500",children:[new Date(e.startDate).toLocaleDateString(),e.startDate&&!e.allDay&&(0,l.FD)("span",{children:[" at ",new Date(e.startDate).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),(0,l.Y)(s.E,{variant:"outline",className:"text-xs mt-1 ".concat(eE(e.type)),children:e.type})]})]},e._id)),(!eu||0===eu.length)&&(0,l.FD)("div",{className:"text-center text-slate-500 py-4",children:[(0,l.Y)(E.A,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,l.Y)("div",{className:"text-sm",children:"No upcoming events"})]})]}),(0,l.Y)(y,{value:"bills",className:"space-y-3 mt-4",children:null==eh?void 0:eh.slice(0,5).map(e=>(0,l.FD)("div",{className:"flex items-start gap-3 p-2 bg-slate-50 rounded-lg",children:[(0,l.Y)(N.A,{className:"w-4 h-4 text-red-600 mt-1"}),(0,l.FD)("div",{className:"flex-1 min-w-0",children:[(0,l.Y)("div",{className:"text-sm font-medium truncate",children:e.title}),(0,l.FD)("div",{className:"text-xs text-slate-500",children:["Due: ",new Date(e.startDate).toLocaleDateString()]}),e.amount&&(0,l.FD)("div",{className:"text-xs font-medium text-red-600",children:["$",e.amount.toFixed(2)]}),(0,l.Y)(s.E,{variant:e.isPaid?"secondary":"destructive",className:"text-xs mt-1",children:e.isPaid?"Paid":"Unpaid"})]})]},e._id))}),(0,l.Y)(y,{value:"tasks",className:"space-y-3 mt-4",children:null==em?void 0:em.filter(e=>"task"===e.type).slice(0,5).map(e=>(0,l.FD)("div",{className:"flex items-start gap-3 p-2 bg-slate-50 rounded-lg",children:[(0,l.Y)(H.A,{className:"w-4 h-4 text-green-600 mt-1"}),(0,l.FD)("div",{className:"flex-1 min-w-0",children:[(0,l.Y)("div",{className:"text-sm font-medium truncate",children:e.title}),(0,l.Y)("div",{className:"text-xs text-slate-500",children:new Date(e.startDate).toLocaleDateString()}),(0,l.Y)(s.E,{variant:"completed"===e.status?"secondary":"outline",className:"text-xs mt-1",children:e.status})]})]},e._id))})]})})]}),(0,l.FD)(r.Zp,{children:[(0,l.Y)(r.aR,{children:(0,l.FD)(r.ZB,{className:"flex items-center gap-2",children:[(0,l.Y)(F.A,{className:"w-5 h-5"}),"Life Templates"]})}),(0,l.Y)(r.Wu,{children:(0,l.Y)(L,{})})]})]}),(0,l.Y)("div",{className:"lg:col-span-3",children:(0,l.FD)(r.Zp,{children:[(0,l.Y)(r.aR,{children:(0,l.FD)("div",{className:"flex items-center justify-between",children:[(0,l.FD)(r.ZB,{className:"flex items-center gap-2",children:[(0,l.Y)(q.A,{className:"w-5 h-5"}),["January","February","March","April","May","June","July","August","September","October","November","December"][a.getMonth()]," ",a.getFullYear()]}),(0,l.FD)("div",{className:"flex items-center gap-2",children:[(0,l.Y)(n.$,{variant:"outline",size:"sm",onClick:()=>eb("prev"),children:(0,l.Y)(K.A,{className:"w-4 h-4"})}),(0,l.Y)(n.$,{variant:"outline",size:"sm",onClick:()=>c(new Date),children:"Today"}),(0,l.Y)(n.$,{variant:"outline",size:"sm",onClick:()=>eb("next"),children:(0,l.Y)(Q.A,{className:"w-4 h-4"})})]})]})}),(0,l.FD)(r.Wu,{children:[(0,l.Y)("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,l.Y)("div",{className:"text-center text-sm font-medium text-slate-600 py-2",children:e},e))}),(0,l.Y)("div",{className:"grid grid-cols-7 gap-1",children:(()=>{let e=new Date(a.getFullYear(),a.getMonth(),1),t=new Date(e);t.setDate(t.getDate()-e.getDay());let l=[],i=new Date(t);for(let e=0;e<42;e++)l.push(new Date(i)),i.setDate(i.getDate()+1);return l})().map((e,t)=>{let i=eY(e),n=e.toDateString()===new Date().toDateString(),r=e.getMonth()===a.getMonth();return(0,l.FD)("div",{className:"\n                          min-h-[120px] p-2 border rounded-lg cursor-pointer transition-colors\n                          ".concat(n?"bg-blue-50 border-blue-200":"border-slate-200 hover:bg-slate-50","\n                          ").concat(r?"":"opacity-40","\n                        "),onClick:()=>c(e),children:[(0,l.Y)("div",{className:"\n                          text-sm font-medium mb-1\n                          ".concat(n?"text-blue-600":r?"text-slate-800":"text-slate-400","\n                        "),children:e.getDate()}),(0,l.FD)("div",{className:"space-y-1",children:[i.slice(0,3).map((e,t)=>(0,l.FD)("div",{className:"text-xs px-1 py-0.5 rounded truncate cursor-pointer hover:opacity-80 transition-opacity group",style:{backgroundColor:"".concat(eT(e.calendarId),"20"),borderLeft:"3px solid ".concat(eT(e.calendarId))},onClick:t=>{t.stopPropagation(),eC(e)},children:[(0,l.FD)("div",{className:"flex items-center justify-between",children:[(0,l.Y)("span",{className:"truncate",children:e.title}),(0,l.FD)("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,l.Y)("button",{onClick:t=>{t.stopPropagation(),eA(e)},className:"w-3 h-3 text-slate-600 hover:text-blue-600",children:(0,l.Y)(S.A,{className:"w-3 h-3"})}),(0,l.Y)("button",{onClick:t=>{t.stopPropagation(),ek(e)},className:"w-3 h-3 text-slate-600 hover:text-red-600",children:(0,l.Y)(A.A,{className:"w-3 h-3"})})]})]}),"bill"===e.type&&e.amount&&(0,l.FD)("span",{className:"ml-1 font-medium",children:["$",e.amount]})]},t)),i.length>3&&(0,l.FD)("div",{className:"text-xs text-slate-500 cursor-pointer hover:text-slate-700",onClick:e=>{e.stopPropagation()},children:["+",i.length-3," more"]})]})]},t)})})]})]})})]})]}),(0,l.Y)(u.lG,{open:R,onOpenChange:$,children:(0,l.FD)(u.Cf,{className:"max-w-md",children:[(0,l.Y)(u.c7,{children:(0,l.FD)(u.L3,{className:"flex items-center gap-2",children:[(0,l.Y)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:z?eT(z.calendarId):"#3b82f6"}}),null==z?void 0:z.title]})}),z&&(0,l.FD)("div",{className:"space-y-4",children:[z.description&&(0,l.FD)("div",{children:[(0,l.Y)("h4",{className:"font-medium text-sm text-slate-700 mb-1",children:"Description"}),(0,l.Y)("p",{className:"text-sm text-slate-600",children:z.description})]}),(0,l.FD)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.FD)("div",{children:[(0,l.Y)("h4",{className:"font-medium text-sm text-slate-700 mb-1",children:"Date & Time"}),(0,l.FD)("p",{className:"text-sm text-slate-600",children:[new Date(z.startDate).toLocaleDateString(),!z.allDay&&(0,l.Y)("span",{className:"block",children:new Date(z.startDate).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),(0,l.FD)("div",{children:[(0,l.Y)("h4",{className:"font-medium text-sm text-slate-700 mb-1",children:"Type"}),(0,l.Y)(s.E,{variant:"outline",className:eE(z.type),children:z.type})]})]}),z.location&&(0,l.FD)("div",{children:[(0,l.Y)("h4",{className:"font-medium text-sm text-slate-700 mb-1",children:"Location"}),(0,l.FD)("p",{className:"text-sm text-slate-600 flex items-center gap-1",children:[(0,l.Y)(X.A,{className:"w-3 h-3"}),z.location]})]}),z.amount&&(0,l.FD)("div",{children:[(0,l.Y)("h4",{className:"font-medium text-sm text-slate-700 mb-1",children:"Amount"}),(0,l.FD)("p",{className:"text-sm text-slate-600 font-medium",children:["$",z.amount.toFixed(2)]})]}),(0,l.FD)("div",{className:"flex items-center gap-2 pt-4 border-t",children:[(0,l.FD)(n.$,{variant:"outline",size:"sm",onClick:()=>eA(z),className:"gap-2",children:[(0,l.Y)(S.A,{className:"w-3 h-3"}),"Edit"]}),(0,l.FD)(n.$,{variant:"outline",size:"sm",onClick:()=>ek(z),className:"gap-2 text-red-600 border-red-200 hover:bg-red-50",children:[(0,l.Y)(A.A,{className:"w-3 h-3"}),"Delete"]}),(0,l.Y)("div",{className:"flex-1"}),(0,l.Y)(n.$,{variant:"ghost",size:"sm",onClick:()=>$(!1),children:"Close"})]})]})]})}),(0,l.Y)(u.lG,{open:ea,onOpenChange:ei,children:(0,l.FD)(u.Cf,{className:"max-w-md",children:[(0,l.Y)(u.c7,{children:(0,l.FD)(u.L3,{className:"flex items-center gap-2",children:[(0,l.Y)(ee.A,{className:"w-5 h-5 text-red-500"}),"Delete Event"]})}),(0,l.FD)("div",{className:"space-y-4",children:[(0,l.FD)("p",{className:"text-sm text-slate-600",children:['Are you sure you want to delete "',null==es?void 0:es.title,'"? This action cannot be undone.']}),(0,l.FD)("div",{className:"flex justify-end gap-2",children:[(0,l.Y)(n.$,{variant:"outline",onClick:()=>ei(!1),children:"Cancel"}),(0,l.FD)(n.$,{variant:"destructive",onClick:()=>es&&ew(es._id),className:"gap-2",children:[(0,l.Y)(A.A,{className:"w-4 h-4"}),"Delete Event"]})]})]})]})})]})}function en(e){var t;let{calendars:a,initialData:r,onSubmit:s,onClose:u}=e,[h,p]=(0,i.useState)({calendarId:(null==r?void 0:r.calendarId)||(null==(t=a[0])?void 0:t._id)||"",title:(null==r?void 0:r.title)||"",description:(null==r?void 0:r.description)||"",type:(null==r?void 0:r.type)||"event",priority:(null==r?void 0:r.priority)||"medium",startDate:(null==r?void 0:r.startDate)?new Date(r.startDate).toISOString().slice(0,16):new Date().toISOString().slice(0,16),allDay:(null==r?void 0:r.allDay)||!1,location:(null==r?void 0:r.location)||"",amount:(null==r?void 0:r.amount)?r.amount.toString():""}),v=async e=>{e.preventDefault();try{let e={...h,startDate:new Date(h.startDate).getTime(),amount:h.amount?parseFloat(h.amount):void 0};await s(e),u()}catch(e){console.error("Failed to save event:",e)}};return(0,l.FD)("form",{onSubmit:v,className:"space-y-4",children:[(0,l.FD)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.FD)("div",{children:[(0,l.Y)(d.J,{htmlFor:"title",children:"Event Title"}),(0,l.Y)(c.p,{id:"title",value:h.title,onChange:e=>p(t=>({...t,title:e.target.value})),placeholder:"Event title",required:!0})]}),(0,l.FD)("div",{children:[(0,l.Y)(d.J,{htmlFor:"calendar",children:"Calendar"}),(0,l.FD)(m.l6,{value:h.calendarId,onValueChange:e=>p(t=>({...t,calendarId:e})),children:[(0,l.Y)(m.bq,{children:(0,l.Y)(m.yv,{})}),(0,l.Y)(m.gC,{children:a.map(e=>(0,l.Y)(m.eb,{value:e._id,children:(0,l.FD)("div",{className:"flex items-center gap-2",children:[(0,l.Y)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),e.name]})},e._id))})]})]})]}),(0,l.FD)("div",{children:[(0,l.Y)(d.J,{htmlFor:"description",children:"Description"}),(0,l.Y)(o.T,{id:"description",value:h.description,onChange:e=>p(t=>({...t,description:e.target.value})),placeholder:"Event description..."})]}),(0,l.FD)("div",{className:"grid grid-cols-3 gap-4",children:[(0,l.FD)("div",{children:[(0,l.Y)(d.J,{htmlFor:"type",children:"Type"}),(0,l.FD)(m.l6,{value:h.type,onValueChange:e=>p(t=>({...t,type:e})),children:[(0,l.Y)(m.bq,{children:(0,l.Y)(m.yv,{})}),(0,l.FD)(m.gC,{children:[(0,l.Y)(m.eb,{value:"event",children:"Event"}),(0,l.Y)(m.eb,{value:"task",children:"Task"}),(0,l.Y)(m.eb,{value:"reminder",children:"Reminder"}),(0,l.Y)(m.eb,{value:"bill",children:"Bill"}),(0,l.Y)(m.eb,{value:"birthday",children:"Birthday"}),(0,l.Y)(m.eb,{value:"appointment",children:"Appointment"})]})]})]}),(0,l.FD)("div",{children:[(0,l.Y)(d.J,{htmlFor:"priority",children:"Priority"}),(0,l.FD)(m.l6,{value:h.priority,onValueChange:e=>p(t=>({...t,priority:e})),children:[(0,l.Y)(m.bq,{children:(0,l.Y)(m.yv,{})}),(0,l.FD)(m.gC,{children:[(0,l.Y)(m.eb,{value:"low",children:"Low"}),(0,l.Y)(m.eb,{value:"medium",children:"Medium"}),(0,l.Y)(m.eb,{value:"high",children:"High"}),(0,l.Y)(m.eb,{value:"critical",children:"Critical"})]})]})]}),(0,l.FD)("div",{children:[(0,l.Y)(d.J,{htmlFor:"startDate",children:"Date & Time"}),(0,l.Y)(c.p,{id:"startDate",type:"datetime-local",value:h.startDate,onChange:e=>p(t=>({...t,startDate:e.target.value})),required:!0})]})]}),(0,l.FD)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.FD)("div",{children:[(0,l.Y)(d.J,{htmlFor:"location",children:"Location"}),(0,l.Y)(c.p,{id:"location",value:h.location,onChange:e=>p(t=>({...t,location:e.target.value})),placeholder:"Event location"})]}),"bill"===h.type&&(0,l.FD)("div",{children:[(0,l.Y)(d.J,{htmlFor:"amount",children:"Amount"}),(0,l.Y)(c.p,{id:"amount",type:"number",step:"0.01",value:h.amount,onChange:e=>p(t=>({...t,amount:e.target.value})),placeholder:"0.00"})]})]}),(0,l.FD)("div",{className:"flex justify-end gap-2",children:[(0,l.Y)(n.$,{type:"button",variant:"outline",onClick:u,children:"Cancel"}),(0,l.Y)(n.$,{type:"submit",children:"Create Event"})]})]})}function er(e){let{onSubmit:t,onClose:a}=e,[r,s]=(0,i.useState)({name:"",description:"",color:"#3b82f6",category:"personal",icon:"\uD83D\uDCC5"}),u=async e=>{e.preventDefault();try{await t(r),a()}catch(e){console.error("Failed to create calendar:",e)}};return(0,l.FD)("form",{onSubmit:u,className:"space-y-4",children:[(0,l.FD)("div",{children:[(0,l.Y)(d.J,{htmlFor:"name",children:"Calendar Name"}),(0,l.Y)(c.p,{id:"name",value:r.name,onChange:e=>s(t=>({...t,name:e.target.value})),placeholder:"My Calendar",required:!0})]}),(0,l.FD)("div",{children:[(0,l.Y)(d.J,{htmlFor:"description",children:"Description"}),(0,l.Y)(o.T,{id:"description",value:r.description,onChange:e=>s(t=>({...t,description:e.target.value})),placeholder:"Calendar description..."})]}),(0,l.FD)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.FD)("div",{children:[(0,l.Y)(d.J,{htmlFor:"category",children:"Category"}),(0,l.FD)(m.l6,{value:r.category,onValueChange:e=>s(t=>({...t,category:e})),children:[(0,l.Y)(m.bq,{children:(0,l.Y)(m.yv,{})}),(0,l.FD)(m.gC,{children:[(0,l.Y)(m.eb,{value:"personal",children:"Personal"}),(0,l.Y)(m.eb,{value:"work",children:"Work"}),(0,l.Y)(m.eb,{value:"health",children:"Health"}),(0,l.Y)(m.eb,{value:"finance",children:"Finance"}),(0,l.Y)(m.eb,{value:"family",children:"Family"})]})]})]}),(0,l.FD)("div",{children:[(0,l.Y)(d.J,{htmlFor:"color",children:"Color"}),(0,l.Y)(c.p,{id:"color",type:"color",value:r.color,onChange:e=>s(t=>({...t,color:e.target.value}))})]})]}),(0,l.FD)("div",{className:"flex justify-end gap-2",children:[(0,l.Y)(n.$,{type:"button",variant:"outline",onClick:a,children:"Cancel"}),(0,l.Y)(n.$,{type:"submit",children:"Create Calendar"})]})]})}function es(){return(0,l.Y)(et.A,{children:(0,l.Y)(ei,{})})}},4165:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>u,L3:()=>p,c7:()=>h,lG:()=>c,zM:()=>d});var l=a(5853),i=a(2115),n=a(5452),r=a(5318),s=a(9434);let c=n.bL,d=n.l9,o=n.ZL;n.bm;let m=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,l.Y)(n.hJ,{ref:t,className:(0,s.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...i})});m.displayName=n.hJ.displayName;let u=i.forwardRef((e,t)=>{let{className:a,children:i,...c}=e;return(0,l.FD)(o,{children:[(0,l.Y)(m,{}),(0,l.FD)(n.UC,{ref:t,className:(0,s.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...c,children:[i,(0,l.FD)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,l.Y)(r.A,{className:"h-4 w-4"}),(0,l.Y)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=n.UC.displayName;let h=e=>{let{className:t,...a}=e;return(0,l.Y)("div",{className:(0,s.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};h.displayName="DialogHeader";let p=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,l.Y)(n.hE,{ref:t,className:(0,s.cn)("text-lg font-semibold leading-none tracking-tight",a),...i})});p.displayName=n.hE.displayName,i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,l.Y)(n.VY,{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",a),...i})}).displayName=n.VY.displayName},6857:(e,t,a)=>{"use strict";a.d(t,{F:()=>l});let l=a(1534).dp},8385:(e,t,a)=>{Promise.resolve().then(a.bind(a,1265))},8539:(e,t,a)=>{"use strict";a.d(t,{T:()=>r});var l=a(5853),i=a(2115),n=a(9434);let r=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,l.Y)("textarea",{className:(0,n.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...i})});r.displayName="Textarea"},9053:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var l=a(5853),i=a(2115),n=a(5695),r=a(1255),s=a(4601),c=a(172);function d(e){let{children:t}=e,{isAuthenticated:a,isLoading:d}=(0,r.a)(),o=(0,n.useRouter)();return((0,i.useEffect)(()=>{d||a||o.push("/home")},[a,d,o]),d)?(0,l.Y)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-purple-50 flex items-center justify-center",children:(0,l.FD)("div",{className:"text-center",children:[(0,l.FD)("div",{className:"flex items-center justify-center gap-3 mb-4",children:[(0,l.Y)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center",children:(0,l.Y)(s.A,{className:"w-7 h-7 text-white"})}),(0,l.Y)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"MyAi"})]}),(0,l.Y)("p",{className:"text-slate-600 mb-4",children:"Loading your personal companion..."}),(0,l.Y)("div",{className:"flex items-center justify-center",children:(0,l.Y)(c.A,{className:"w-6 h-6 animate-spin text-blue-600"})})]})}):a?(0,l.Y)(l.FK,{children:t}):null}},9409:(e,t,a)=>{"use strict";a.d(t,{bq:()=>u,eb:()=>g,gC:()=>v,l6:()=>o,yv:()=>m});var l=a(5853),i=a(2115),n=a(1461),r=a(9556),s=a(7381),c=a(518),d=a(9434);let o=n.bL;n.YJ;let m=n.WT,u=i.forwardRef((e,t)=>{let{className:a,children:i,...s}=e;return(0,l.FD)(n.l9,{ref:t,className:(0,d.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...s,children:[i,(0,l.Y)(n.In,{asChild:!0,children:(0,l.Y)(r.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=n.l9.displayName;let h=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,l.Y)(n.PP,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...i,children:(0,l.Y)(s.A,{className:"h-4 w-4"})})});h.displayName=n.PP.displayName;let p=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,l.Y)(n.wn,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...i,children:(0,l.Y)(r.A,{className:"h-4 w-4"})})});p.displayName=n.wn.displayName;let v=i.forwardRef((e,t)=>{let{className:a,children:i,position:r="popper",...s}=e;return(0,l.Y)(n.ZL,{children:(0,l.FD)(n.UC,{ref:t,className:(0,d.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:r,...s,children:[(0,l.Y)(h,{}),(0,l.Y)(n.LM,{className:(0,d.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:i}),(0,l.Y)(p,{})]})})});v.displayName=n.UC.displayName,i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,l.Y)(n.JU,{ref:t,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",a),...i})}).displayName=n.JU.displayName;let g=i.forwardRef((e,t)=>{let{className:a,children:i,...r}=e;return(0,l.FD)(n.q7,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...r,children:[(0,l.Y)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.Y)(n.VF,{children:(0,l.Y)(c.A,{className:"h-4 w-4"})})}),(0,l.Y)(n.p4,{children:i})]})});g.displayName=n.q7.displayName,i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,l.Y)(n.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...i})}).displayName=n.wv.displayName}},e=>{var t=t=>e(e.s=t);e.O(0,[853,273,935,895,969,396,339,420,441,684,358],()=>t(8385)),_N_E=e.O()}]);