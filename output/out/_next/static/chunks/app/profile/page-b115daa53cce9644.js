(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{1028:(e,t,a)=>{"use strict";a.d(t,{J:()=>r});var l=a(4054),n=a(9221),s=a(6857);function r(){let{signIn:e,signOut:t}=(0,n.BG)(),a=(0,l.IT)(s.F.users.getCurrentUser),r=(0,l.n_)(s.F.users.createOrUpdateUser),i=(0,l.n_)(s.F.users.updateLastActive),c=null!=a,d=void 0===a,o=(null==a?void 0:a._id)||null,m=async()=>{if(c)try{await i()}catch(e){console.error("Update last active error:",e)}};return{user:a,userId:o,isAuthenticated:c,isLoading:d,signIn:async(t,a)=>{try{return await e("password",{email:t,password:a}),{success:!0}}catch(e){return console.error("Sign in error:",e),{success:!1,error:e instanceof Error?e.message:"Sign in failed"}}},signUp:async(t,a,l)=>{try{return await e("password",{email:t,password:a,flow:"signUp"}),l&&await r({name:l,email:t}),{success:!0}}catch(e){return console.error("Sign up error:",e),{success:!1,error:e instanceof Error?e.message:"Sign up failed"}}},signOut:async()=>{try{return await t(),{success:!0}}catch(e){return console.error("Sign out error:",e),{success:!1,error:e instanceof Error?e.message:"Sign out failed"}}},createUserProfile:async e=>{try{return await r(e),{success:!0}}catch(e){return console.error("Create user profile error:",e),{success:!1,error:e instanceof Error?e.message:"Failed to create user profile"}}},markUserActive:m}}},1414:(e,t,a)=>{"use strict";e.exports=a(2436)},2298:(e,t,a)=>{Promise.resolve().then(a.bind(a,5129))},2436:(e,t,a)=>{"use strict";var l=a(2115),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=l.useState,r=l.useEffect,i=l.useLayoutEffect,c=l.useDebugValue;function d(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!n(e,a)}catch(e){return!0}}var o="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var a=t(),l=s({inst:{value:a,getSnapshot:t}}),n=l[0].inst,o=l[1];return i(function(){n.value=a,n.getSnapshot=t,d(n)&&o({inst:n})},[e,a,t]),r(function(){return d(n)&&o({inst:n}),e(function(){d(n)&&o({inst:n})})},[e]),c(a),a};t.useSyncExternalStore=void 0!==l.useSyncExternalStore?l.useSyncExternalStore:o},3042:(e,t,a)=>{"use strict";a.d(t,{eu:()=>F,q5:()=>k,BK:()=>D});var l=a(5853),n=a(2115),s=a(6081),r=a(9033),i=a(2712),c=a(3655),d=a(1414);function o(){return()=>{}}var m=a(5155),h="Avatar",[p,u]=(0,s.A)(h),[g,v]=p(h),f=n.forwardRef((e,t)=>{let{__scopeAvatar:a,...l}=e,[s,r]=n.useState("idle");return(0,m.jsx)(g,{scope:a,imageLoadingStatus:s,onImageLoadingStatusChange:r,children:(0,m.jsx)(c.sG.span,{...l,ref:t})})});f.displayName=h;var x="AvatarImage",y=n.forwardRef((e,t)=>{let{__scopeAvatar:a,src:l,onLoadingStatusChange:s=()=>{},...h}=e,p=v(x,a),u=function(e,t){let{referrerPolicy:a,crossOrigin:l}=t,s=(0,d.useSyncExternalStore)(o,()=>!0,()=>!1),r=n.useRef(null),c=s?(r.current||(r.current=new window.Image),r.current):null,[m,h]=n.useState(()=>Y(c,e));return(0,i.N)(()=>{h(Y(c,e))},[c,e]),(0,i.N)(()=>{let e=e=>()=>{h(e)};if(!c)return;let t=e("loaded"),n=e("error");return c.addEventListener("load",t),c.addEventListener("error",n),a&&(c.referrerPolicy=a),"string"==typeof l&&(c.crossOrigin=l),()=>{c.removeEventListener("load",t),c.removeEventListener("error",n)}},[c,l,a]),m}(l,h),g=(0,r.c)(e=>{s(e),p.onImageLoadingStatusChange(e)});return(0,i.N)(()=>{"idle"!==u&&g(u)},[u,g]),"loaded"===u?(0,m.jsx)(c.sG.img,{...h,ref:t,src:l}):null});y.displayName=x;var b="AvatarFallback",N=n.forwardRef((e,t)=>{let{__scopeAvatar:a,delayMs:l,...s}=e,r=v(b,a),[i,d]=n.useState(void 0===l);return n.useEffect(()=>{if(void 0!==l){let e=window.setTimeout(()=>d(!0),l);return()=>window.clearTimeout(e)}},[l]),i&&"loaded"!==r.imageLoadingStatus?(0,m.jsx)(c.sG.span,{...s,ref:t}):null});function Y(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}N.displayName=b;var w=a(9434);let F=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.Y)(f,{ref:t,className:(0,w.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...n})});F.displayName=f.displayName;let D=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.Y)(y,{ref:t,className:(0,w.cn)("aspect-square h-full w-full",a),...n})});D.displayName=y.displayName;let k=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.Y)(N,{ref:t,className:(0,w.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...n})});k.displayName=N.displayName},4165:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>h,L3:()=>u,c7:()=>p,lG:()=>c,zM:()=>d});var l=a(5853),n=a(2115),s=a(5452),r=a(5318),i=a(9434);let c=s.bL,d=s.l9,o=s.ZL;s.bm;let m=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.Y)(s.hJ,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...n})});m.displayName=s.hJ.displayName;let h=n.forwardRef((e,t)=>{let{className:a,children:n,...c}=e;return(0,l.FD)(o,{children:[(0,l.Y)(m,{}),(0,l.FD)(s.UC,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...c,children:[n,(0,l.FD)(s.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,l.Y)(r.A,{className:"h-4 w-4"}),(0,l.Y)("span",{className:"sr-only",children:"Close"})]})]})]})});h.displayName=s.UC.displayName;let p=e=>{let{className:t,...a}=e;return(0,l.Y)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};p.displayName="DialogHeader";let u=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.Y)(s.hE,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",a),...n})});u.displayName=s.hE.displayName,n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.Y)(s.VY,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...n})}).displayName=s.VY.displayName},5074:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(157).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},5129:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>X});var l=a(5853),n=a(2115),s=a(285),r=a(6695),i=a(3042),c=a(6126),d=a(8186),o=a(207),m=a(8224),h=a(1920),p=a(1721),u=a(5554),g=a(286),v=a(8098),f=a(4601),x=a(8271),y=a(8763),b=a(9637),N=a(7648),Y=a(5731),w=a(3662),F=a(1028),D=a(4054),k=a(6857),A=a(6424),C=a(2523),M=a(8539),S=a(4165),j=a(5057),E=a(157);let U=(0,E.A)("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);var P=a(5074),z=a(7223),I=a(5318);let L=(0,E.A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);function R(e){let{userId:t}=e,[a,i]=(0,n.useState)(""),[d,o]=(0,n.useState)(null),[m,p]=(0,n.useState)(null),[v,f]=(0,n.useState)(!1),[x,b]=(0,n.useState)(""),[N,Y]=(0,n.useState)(""),[F,E]=(0,n.useState)(5),[R,T]=(0,n.useState)([]),[$,B]=(0,n.useState)("conversation"),_=(0,D.IT)(k.F.memory.getMemoriesByUser,{}),O=(0,D.IT)(k.F.memory.searchMemories,a.length>2?{query:a}:"skip"),Z=(0,D.n_)(k.F.memory.updateMemory),q=(0,D.n_)(k.F.memory.deleteMemory),G=e=>{p(e),b(e.content),Y(e.summary||""),E(e.importance),T(e.tags),B(e.type),f(!0)},J=async()=>{if(m)try{await Z({memoryId:m._id,content:x.trim(),summary:N.trim()||void 0,importance:F,tags:R.filter(e=>e.trim())}),f(!1),p(null)}catch(e){console.error("Failed to update memory:",e)}},V=async e=>{if(confirm("Are you sure you want to delete this memory? This action cannot be undone."))try{await q({memoryId:e})}catch(e){console.error("Failed to delete memory:",e)}},H=(e,t)=>{let a=[...R];a[e]=t,T(a)},W=e=>{T(R.filter((t,a)=>a!==e))},K=a.length>2?O:_,Q=null==K?void 0:K.filter(e=>!d||e.type===d),X=[{id:"conversation",label:"Conversations",icon:u.A,color:"bg-blue-100 text-blue-800"},{id:"event",label:"Events",icon:h.A,color:"bg-green-100 text-green-800"},{id:"goal",label:"Goals",icon:U,color:"bg-yellow-100 text-yellow-800"},{id:"preference",label:"Preferences",icon:g.A,color:"bg-purple-100 text-purple-800"},{id:"fact",label:"Facts",icon:u.A,color:"bg-indigo-100 text-indigo-800"}],ee=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),et=e=>e>=8?"bg-red-100 text-red-800 border-red-200":e>=6?"bg-orange-100 text-orange-800 border-orange-200":e>=4?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-gray-100 text-gray-800 border-gray-200";return(0,l.FD)("div",{className:"flex flex-col h-full",children:[(0,l.FD)("div",{className:"bg-white/50 dark:bg-slate-800/50 backdrop-blur-sm border-b border-slate-200 dark:border-slate-700 p-6",children:[(0,l.FD)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.FD)("div",{children:[(0,l.Y)("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Memory Bank"}),(0,l.FD)("p",{className:"text-slate-600 dark:text-slate-400",children:[(null==Q?void 0:Q.length)||0," memories stored"]})]}),(0,l.FD)(c.E,{variant:"secondary",className:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300",children:[(0,l.Y)(u.A,{className:"w-4 h-4 mr-1"}),"Active Learning"]})]}),(0,l.FD)("div",{className:"relative mb-4",children:[(0,l.Y)(P.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4"}),(0,l.Y)(C.p,{placeholder:"Search memories...",value:a,onChange:e=>i(e.target.value),className:"pl-10"})]}),(0,l.FD)("div",{className:"flex gap-2 flex-wrap",children:[(0,l.Y)(s.$,{variant:null===d?"default":"outline",size:"sm",onClick:()=>o(null),children:"All Types"}),X.map(e=>{let t=e.icon;return(0,l.FD)(s.$,{variant:d===e.id?"default":"outline",size:"sm",onClick:()=>o(d===e.id?null:e.id),className:"gap-1",children:[(0,l.Y)(t,{className:"w-3 h-3"}),e.label]},e.id)})]})]}),(0,l.Y)(A.F,{className:"flex-1 p-6",children:(0,l.Y)("div",{className:"space-y-4 max-w-4xl mx-auto",children:Q?0===Q.length?(0,l.FD)("div",{className:"text-center py-12",children:[(0,l.Y)(u.A,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),(0,l.Y)("h3",{className:"text-lg font-medium text-slate-600 dark:text-slate-400 mb-2",children:a?"No memories found":"No memories yet"}),(0,l.Y)("p",{className:"text-slate-500 dark:text-slate-500",children:a?"Try adjusting your search terms":"Start chatting with MyAi to create your first memories"})]}):Q.map(e=>{let t=X.find(t=>t.id===e.type),a=(null==t?void 0:t.icon)||u.A;return(0,l.FD)(r.Zp,{className:"hover:shadow-md transition-shadow",children:[(0,l.FD)(r.aR,{className:"pb-3",children:[(0,l.FD)("div",{className:"flex items-start justify-between",children:[(0,l.FD)("div",{className:"flex items-center gap-2",children:[(0,l.Y)(a,{className:"w-5 h-5 text-slate-600"}),(0,l.Y)(c.E,{variant:"secondary",className:(null==t?void 0:t.color)||"bg-gray-100 text-gray-800",children:(null==t?void 0:t.label)||e.type}),(0,l.FD)(c.E,{variant:"outline",className:"".concat(et(e.importance)," border"),children:["Importance: ",e.importance,"/10"]})]}),(0,l.FD)("div",{className:"flex items-center gap-2",children:[(0,l.Y)("div",{className:"text-xs text-slate-500",children:ee(e.createdAt)}),(0,l.Y)(s.$,{variant:"ghost",size:"sm",onClick:()=>G(e),className:"h-6 w-6 p-0 text-slate-500 hover:text-slate-700",children:(0,l.Y)(y.A,{className:"w-3 h-3"})}),(0,l.Y)(s.$,{variant:"ghost",size:"sm",onClick:()=>V(e._id),className:"h-6 w-6 p-0 text-red-500 hover:text-red-700",children:(0,l.Y)(z.A,{className:"w-3 h-3"})})]})]}),e.summary&&(0,l.Y)(r.ZB,{className:"text-lg text-slate-800 dark:text-slate-200",children:e.summary})]}),(0,l.FD)(r.Wu,{children:[(0,l.Y)("p",{className:"text-slate-600 dark:text-slate-400 mb-3 leading-relaxed",children:e.content}),e.metadata&&(0,l.FD)("div",{className:"flex flex-wrap gap-2 mb-3 text-xs",children:[e.metadata.location&&(0,l.FD)("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded",children:[(0,l.Y)(w.A,{className:"w-3 h-3"}),e.metadata.location]}),e.metadata.relatedPeople&&e.metadata.relatedPeople.length>0&&(0,l.FD)("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded",children:[(0,l.Y)(g.A,{className:"w-3 h-3"}),e.metadata.relatedPeople.join(", ")]}),e.metadata.emotion&&(0,l.FD)("div",{className:"bg-pink-100 text-pink-800 px-2 py-1 rounded",children:["\uD83D\uDCAD ",e.metadata.emotion]})]}),e.tags.length>0&&(0,l.Y)("div",{className:"flex flex-wrap gap-1",children:e.tags.map((e,t)=>(0,l.FD)(c.E,{variant:"outline",className:"text-xs",children:["#",e]},t))})]})]},e._id)}):(0,l.Y)("div",{className:"text-center py-8",children:(0,l.Y)("div",{className:"animate-pulse",children:"Loading memories..."})})})}),(0,l.Y)(S.lG,{open:v,onOpenChange:f,children:(0,l.FD)(S.Cf,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,l.Y)(S.c7,{children:(0,l.Y)(S.L3,{children:"Edit Memory"})}),(0,l.FD)("div",{className:"space-y-4 py-4",children:[(0,l.FD)("div",{children:[(0,l.Y)(j.J,{className:"text-base font-medium",children:"Type"}),(0,l.Y)("div",{className:"mt-2 flex flex-wrap gap-2",children:X.map(e=>(0,l.Y)(s.$,{variant:$===e.id?"default":"outline",size:"sm",onClick:()=>B(e.id),children:e.label},e.id))})]}),(0,l.FD)("div",{children:[(0,l.Y)(j.J,{className:"text-base font-medium",children:"Content"}),(0,l.Y)(M.T,{value:x,onChange:e=>b(e.target.value),className:"mt-1",rows:4,placeholder:"Describe this memory..."})]}),(0,l.FD)("div",{children:[(0,l.Y)(j.J,{className:"text-base font-medium",children:"Summary (Optional)"}),(0,l.Y)(C.p,{value:N,onChange:e=>Y(e.target.value),className:"mt-1",placeholder:"Brief summary of this memory..."})]}),(0,l.FD)("div",{children:[(0,l.Y)(j.J,{className:"text-base font-medium",children:"Importance (1-10)"}),(0,l.FD)("div",{className:"mt-2 flex items-center gap-4",children:[(0,l.Y)("input",{type:"range",min:"1",max:"10",value:F,onChange:e=>E(Number(e.target.value)),className:"flex-1"}),(0,l.FD)(c.E,{variant:"outline",className:et(F),children:[F,"/10"]})]})]}),(0,l.FD)("div",{children:[(0,l.Y)(j.J,{className:"text-base font-medium",children:"Tags"}),R.map((e,t)=>(0,l.FD)("div",{className:"mt-2 flex gap-2",children:[(0,l.Y)(C.p,{value:e,onChange:e=>H(t,e.target.value),placeholder:"Add a tag..."}),(0,l.Y)(s.$,{variant:"outline",size:"sm",onClick:()=>W(t),children:(0,l.Y)(I.A,{className:"w-4 h-4"})})]},"edit-tag-".concat(t))),(0,l.Y)(s.$,{variant:"ghost",size:"sm",onClick:()=>{T([...R,""])},className:"mt-2",children:"+ Add tag"})]}),(0,l.FD)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,l.Y)(s.$,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),(0,l.FD)(s.$,{onClick:J,disabled:!x.trim(),children:[(0,l.Y)(L,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]})]})]})})]})}var T=a(8046);let $=(0,E.A)("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]),B=(0,E.A)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),_=(0,E.A)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);function O(e){let{userId:t}=e,[a,i]=(0,n.useState)(!1),[d,o]=(0,n.useState)(null),[m,h]=(0,n.useState)(""),[p,u]=(0,n.useState)(""),[f,x]=(0,n.useState)(""),[b,N]=(0,n.useState)([""]),[Y,w]=(0,n.useState)(""),F=(0,D.IT)(k.F.family.getFamilyMembers,{userId:t}),E=(0,D.IT)(k.F.family.getUpcomingBirthdays,{userId:t,daysAhead:30}),U=(0,D.n_)(k.F.family.addFamilyMember),P=(0,D.n_)(k.F.family.updateFamilyMember),I=(0,D.n_)(k.F.family.deleteFamilyMember),L=()=>{h(""),u(""),x(""),N([""]),w(""),o(null)},R=e=>{if(e){var t;o(e),h(e.name),u(e.relationship),x(e.birthday||""),N((null==(t=e.characteristics)?void 0:t.length)?e.characteristics:[""]),w(e.notes||"")}else L();i(!0)},O=async()=>{try{let e={name:m.trim(),relationship:p.trim(),birthday:f||void 0,characteristics:b.filter(e=>e.trim()),notes:Y.trim()||void 0};d?await P({familyMemberId:d._id,...e}):await U({userId:t,...e}),i(!1),L()}catch(e){console.error("Failed to save family member:",e)}},Z=async e=>{if(confirm("Are you sure you want to remove this family member?"))try{await I({familyMemberId:e})}catch(e){console.error("Failed to delete family member:",e)}},q=(e,t)=>{let a=[...b];a[e]=t,N(a)},G=e=>{b.length>1&&N(b.filter((t,a)=>a!==e))},J=e=>new Date(e).toLocaleDateString("en-US",{month:"long",day:"numeric"}),V=e=>({Parent:"bg-blue-100 text-blue-800",Child:"bg-green-100 text-green-800",Sibling:"bg-purple-100 text-purple-800",Spouse:"bg-red-100 text-red-800",Partner:"bg-pink-100 text-pink-800",Grandparent:"bg-indigo-100 text-indigo-800",Grandchild:"bg-yellow-100 text-yellow-800",Friend:"bg-orange-100 text-orange-800"})[e]||"bg-gray-100 text-gray-800";return(0,l.FD)("div",{className:"flex flex-col h-full",children:[(0,l.FD)("div",{className:"bg-white/50 dark:bg-slate-800/50 backdrop-blur-sm border-b border-slate-200 dark:border-slate-700 p-6",children:[(0,l.FD)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.FD)("div",{children:[(0,l.Y)("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Family & Friends"}),(0,l.Y)("p",{className:"text-slate-600 dark:text-slate-400",children:"Keep track of the important people in your life"})]}),(0,l.FD)("div",{className:"flex items-center gap-4",children:[F&&(0,l.FD)("div",{className:"text-center",children:[(0,l.Y)("div",{className:"text-2xl font-bold text-blue-600",children:F.length}),(0,l.Y)("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"People"})]}),(0,l.FD)(S.lG,{open:a,onOpenChange:i,children:[(0,l.Y)(S.zM,{asChild:!0,children:(0,l.FD)(s.$,{className:"gap-2",onClick:()=>R(),children:[(0,l.Y)(T.A,{className:"w-4 h-4"}),"Add Person"]})}),(0,l.FD)(S.Cf,{className:"max-w-lg max-h-[80vh] overflow-y-auto",children:[(0,l.Y)(S.c7,{children:(0,l.Y)(S.L3,{children:d?"Edit Person":"Add New Person"})}),(0,l.FD)("div",{className:"space-y-4 py-4",children:[(0,l.FD)("div",{children:[(0,l.Y)(j.J,{className:"text-base font-medium",children:"Name"}),(0,l.Y)(C.p,{placeholder:"Enter name",value:m,onChange:e=>h(e.target.value),className:"mt-1"})]}),(0,l.FD)("div",{children:[(0,l.Y)(j.J,{className:"text-base font-medium",children:"Relationship"}),(0,l.Y)("div",{className:"mt-2 flex flex-wrap gap-2",children:["Parent","Child","Sibling","Spouse","Partner","Grandparent","Grandchild","Aunt","Uncle","Cousin","Friend","Colleague","Mentor","Other"].map(e=>(0,l.Y)(s.$,{variant:p===e?"default":"outline",size:"sm",onClick:()=>u(e),children:e},e))})]}),(0,l.FD)("div",{children:[(0,l.Y)(j.J,{className:"text-base font-medium",children:"Birthday (Optional)"}),(0,l.Y)(C.p,{type:"date",value:f,onChange:e=>x(e.target.value),className:"mt-1"})]}),(0,l.FD)("div",{children:[(0,l.Y)(j.J,{className:"text-base font-medium",children:"Characteristics"}),b.map((e,t)=>(0,l.FD)("div",{className:"mt-2 flex gap-2",children:[(0,l.Y)(C.p,{placeholder:"e.g., loves cooking, plays guitar",value:e,onChange:e=>q(t,e.target.value)}),b.length>1&&(0,l.Y)(s.$,{variant:"outline",size:"sm",onClick:()=>G(t),children:"\xd7"})]},"characteristic-".concat(t))),(0,l.Y)(s.$,{variant:"ghost",size:"sm",onClick:()=>{N([...b,""])},className:"mt-2",children:"+ Add characteristic"})]}),(0,l.FD)("div",{children:[(0,l.Y)(j.J,{className:"text-base font-medium",children:"Notes"}),(0,l.Y)(M.T,{placeholder:"Any additional information or memories...",value:Y,onChange:e=>w(e.target.value),className:"mt-1",rows:3})]}),(0,l.FD)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,l.Y)(s.$,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),(0,l.FD)(s.$,{onClick:O,disabled:!m.trim()||!p.trim(),children:[d?"Update":"Add"," Person"]})]})]})]})]})]})]}),E&&E.length>0&&(0,l.FD)("div",{className:"bg-gradient-to-r from-pink-50 to-purple-50 dark:from-pink-900/20 dark:to-purple-900/20 border border-pink-200 dark:border-pink-800 rounded-lg p-4",children:[(0,l.FD)("div",{className:"flex items-center gap-2 mb-2",children:[(0,l.Y)($,{className:"w-5 h-5 text-pink-600"}),(0,l.Y)("span",{className:"font-medium text-pink-800 dark:text-pink-200",children:"Upcoming Birthdays"})]}),(0,l.Y)("div",{className:"flex flex-wrap gap-2",children:E.slice(0,3).map(e=>(0,l.FD)(c.E,{variant:"secondary",className:"bg-pink-100 text-pink-800",children:[e.name," - ",0===e.daysUntilBirthday?"Today!":"".concat(e.daysUntilBirthday," days")]},e._id))})]})]}),(0,l.Y)(A.F,{className:"flex-1 p-6",children:(0,l.Y)("div",{className:"space-y-4 max-w-4xl mx-auto",children:F?0===F.length?(0,l.FD)("div",{className:"text-center py-12",children:[(0,l.Y)(g.A,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),(0,l.Y)("h3",{className:"text-lg font-medium text-slate-600 dark:text-slate-400 mb-2",children:"No family members added yet"}),(0,l.Y)("p",{className:"text-slate-500 dark:text-slate-500 mb-4",children:"Start building your personal network by adding family and friends"}),(0,l.FD)(s.$,{onClick:()=>R(),className:"gap-2",children:[(0,l.Y)(B,{className:"w-4 h-4"}),"Add First Person"]})]}):(0,l.Y)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:F.map(e=>(0,l.FD)(r.Zp,{className:"hover:shadow-md transition-shadow",children:[(0,l.Y)(r.aR,{className:"pb-3",children:(0,l.FD)("div",{className:"flex items-start justify-between",children:[(0,l.FD)("div",{children:[(0,l.Y)(r.ZB,{className:"text-lg text-slate-800 dark:text-slate-200",children:e.name}),(0,l.Y)(c.E,{variant:"secondary",className:"mt-1 ".concat(V(e.relationship)),children:e.relationship})]}),(0,l.FD)("div",{className:"flex gap-1",children:[(0,l.Y)(s.$,{variant:"ghost",size:"sm",onClick:()=>R(e),children:(0,l.Y)(y.A,{className:"w-4 h-4"})}),(0,l.Y)(s.$,{variant:"ghost",size:"sm",onClick:()=>Z(e._id),className:"text-red-600 hover:text-red-700",children:(0,l.Y)(z.A,{className:"w-4 h-4"})})]})]})}),(0,l.FD)(r.Wu,{className:"space-y-3",children:[e.birthday&&(0,l.FD)("div",{className:"flex items-center gap-2 text-sm",children:[(0,l.Y)(_,{className:"w-4 h-4 text-pink-600"}),(0,l.FD)("span",{className:"text-slate-600 dark:text-slate-400",children:["Birthday: ",J(e.birthday)]})]}),e.characteristics&&e.characteristics.length>0&&(0,l.FD)("div",{children:[(0,l.FD)("h4",{className:"font-medium text-slate-700 dark:text-slate-300 mb-2 text-sm flex items-center gap-1",children:[(0,l.Y)(v.A,{className:"w-4 h-4"}),"Characteristics"]}),(0,l.Y)("div",{className:"flex flex-wrap gap-1",children:e.characteristics.map((t,a)=>(0,l.Y)(c.E,{variant:"outline",className:"text-xs",children:t},"char-".concat(e._id,"-").concat(a)))})]}),e.notes&&(0,l.FD)("div",{children:[(0,l.Y)("h4",{className:"font-medium text-slate-700 dark:text-slate-300 mb-1 text-sm",children:"Notes"}),(0,l.FD)("p",{className:"text-slate-600 dark:text-slate-400 text-sm italic",children:['"',e.notes,'"']})]})]})]},e._id))}):(0,l.Y)("div",{className:"text-center py-8",children:(0,l.Y)("div",{className:"animate-pulse",children:"Loading family members..."})})})})]})}let Z=(0,E.A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var q=a(172);let G=(0,E.A)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);var J=a(5300);function V(e){let{userId:t}=e,[a,i]=(0,n.useState)(!1),[c,d]=(0,n.useState)(null),o=(0,D.IT)(k.F.users.getCurrentUser),m=(0,D.IT)(k.F.memory.getMemoriesByUser,{}),h=(0,D.IT)(k.F.conversations.getConversationsByUser,{}),p=(0,D.IT)(k.F.checkIns.getCheckInsByUser,{}),u=(0,D.IT)(k.F.family.getFamilyMembers,{}),g=(0,D.IT)(k.F.reminders.getRemindersByUser,{}),v=o&&m&&h&&p&&u&&g,f=async()=>{if(v){i(!0),d("json");try{let e={exportDate:new Date().toISOString(),user:{name:o.name,email:o.email,createdAt:o.createdAt,timezone:o.timezone},memories:m.map(e=>({type:e.type,content:e.content,summary:e.summary,importance:e.importance,tags:e.tags,metadata:e.metadata,createdAt:e.createdAt,updatedAt:e.updatedAt})),conversations:h.map(e=>({title:e.title,messages:e.messages.map(e=>({role:e.role,content:e.content,timestamp:e.timestamp})),createdAt:e.createdAt})),checkIns:p.map(e=>({date:e.date,mood:e.mood,emotions:e.emotions,highlights:e.highlights,challenges:e.challenges,goals:e.goals,gratitude:e.gratitude,notes:e.notes,createdAt:e.createdAt})),familyMembers:u.map(e=>({name:e.name,relationship:e.relationship,birthday:e.birthday,notes:e.notes,createdAt:e.createdAt})),reminders:g.map(e=>({title:e.title,description:e.description,dueDate:e.dueDate,priority:e.priority,status:e.status,category:e.category,createdAt:e.createdAt,completedAt:e.completedAt})),stats:{totalMemories:m.length,totalConversations:h.length,totalCheckIns:p.length,totalFamilyMembers:u.length,totalReminders:g.length}},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=URL.createObjectURL(t),l=document.createElement("a");l.href=a,l.download="myai-data-export-".concat(new Date().toISOString().split("T")[0],".json"),document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a)}catch(e){console.error("Export failed:",e),alert("Export failed. Please try again.")}finally{i(!1),d(null)}}},x=async()=>{if(v){i(!0),d("pdf");try{let e=y(),t=window.open("","_blank");if(!t)throw Error("Popup blocked. Please allow popups for this site.");t.document.write(e),t.document.close(),t.onload=()=>{t.print(),t.close()}}catch(e){console.error("PDF export failed:",e),alert("PDF export failed. Please try again or check your popup settings.")}finally{i(!1),d(null)}}},y=()=>{if(!v)return"";let e=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return"\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>MyAi Data Export - ".concat(o.name||"User","</title>\n        <style>\n          body { font-family: Arial, sans-serif; margin: 40px; line-height: 1.6; }\n          h1 { color: #2563eb; border-bottom: 2px solid #2563eb; padding-bottom: 10px; }\n          h2 { color: #475569; margin-top: 30px; }\n          h3 { color: #64748b; margin-top: 20px; }\n          .section { margin-bottom: 30px; }\n          .memory, .conversation, .checkin, .family, .reminder {\n            border: 1px solid #e2e8f0;\n            padding: 15px;\n            margin: 10px 0;\n            border-radius: 5px;\n            background: #f8fafc;\n          }\n          .tag {\n            background: #e2e8f0;\n            padding: 2px 8px;\n            border-radius: 12px;\n            font-size: 0.8em;\n            margin: 2px;\n            display: inline-block;\n          }\n          .importance { color: #dc2626; font-weight: bold; }\n          .mood { color: #059669; font-weight: bold; }\n          .date { color: #6b7280; font-size: 0.9em; }\n          .stats { display: flex; flex-wrap: wrap; gap: 20px; }\n          .stat {\n            background: #dbeafe;\n            padding: 15px;\n            border-radius: 8px;\n            text-align: center;\n            min-width: 120px;\n          }\n          .stat-number { font-size: 2em; font-weight: bold; color: #2563eb; }\n          .stat-label { color: #475569; }\n          @media print {\n            body { margin: 20px; }\n            .section { page-break-inside: avoid; }\n          }\n        </style>\n      </head>\n      <body>\n        <h1>MyAi Personal Memory Export</h1>\n        <p><strong>User:</strong> ").concat(o.name||"Unknown","</p>\n        <p><strong>Export Date:</strong> ").concat(e(Date.now()),'</p>\n\n        <div class="section">\n          <h2>Summary Statistics</h2>\n          <div class="stats">\n            <div class="stat">\n              <div class="stat-number">').concat(m.length,'</div>\n              <div class="stat-label">Memories</div>\n            </div>\n            <div class="stat">\n              <div class="stat-number">').concat(h.length,'</div>\n              <div class="stat-label">Conversations</div>\n            </div>\n            <div class="stat">\n              <div class="stat-number">').concat(p.length,'</div>\n              <div class="stat-label">Check-ins</div>\n            </div>\n            <div class="stat">\n              <div class="stat-number">').concat(u.length,'</div>\n              <div class="stat-label">Family & Friends</div>\n            </div>\n            <div class="stat">\n              <div class="stat-number">').concat(g.length,'</div>\n              <div class="stat-label">Reminders</div>\n            </div>\n          </div>\n        </div>\n\n        <div class="section">\n          <h2>Memories (').concat(m.length,")</h2>\n          ").concat(m.map(t=>'\n            <div class="memory">\n              <h3>'.concat(t.summary||t.type.charAt(0).toUpperCase()+t.type.slice(1),"</h3>\n              <p>").concat(t.content,'</p>\n              <p><span class="importance">Importance: ').concat(t.importance,"/10</span></p>\n              <p>Tags: ").concat(t.tags.map(e=>'<span class="tag">#'.concat(e,"</span>")).join(" "),'</p>\n              <p class="date">Created: ').concat(e(t.createdAt),"</p>\n            </div>\n          ")).join(""),'\n        </div>\n\n        <div class="section">\n          <h2>Daily Check-ins (').concat(p.length,")</h2>\n          ").concat(p.map(e=>{var t,a,l,n;return'\n            <div class="checkin">\n              <h3>'.concat(e.date,'</h3>\n              <p><span class="mood">Mood: ').concat(e.mood,"/10</span></p>\n              <p><strong>Emotions:</strong> ").concat(e.emotions.join(", "),"</p>\n              ").concat((null==(t=e.highlights)?void 0:t.length)?"<p><strong>Highlights:</strong> ".concat(e.highlights.join(", "),"</p>"):"","\n              ").concat((null==(a=e.challenges)?void 0:a.length)?"<p><strong>Challenges:</strong> ".concat(e.challenges.join(", "),"</p>"):"","\n              ").concat((null==(l=e.goals)?void 0:l.length)?"<p><strong>Goals:</strong> ".concat(e.goals.join(", "),"</p>"):"","\n              ").concat((null==(n=e.gratitude)?void 0:n.length)?"<p><strong>Gratitude:</strong> ".concat(e.gratitude.join(", "),"</p>"):"","\n              ").concat(e.notes?"<p><strong>Notes:</strong> ".concat(e.notes,"</p>"):"","\n            </div>\n          ")}).join(""),'\n        </div>\n\n        <div class="section">\n          <h2>Family & Friends (').concat(u.length,")</h2>\n          ").concat(u.map(e=>'\n            <div class="family">\n              <h3>'.concat(e.name,"</h3>\n              <p><strong>Relationship:</strong> ").concat(e.relationship,"</p>\n              ").concat(e.birthday?"<p><strong>Birthday:</strong> ".concat(e.birthday,"</p>"):"","\n\n              ").concat(e.notes?"<p><strong>Notes:</strong> ".concat(e.notes,"</p>"):"","\n            </div>\n          ")).join(""),'\n        </div>\n\n        <div class="section">\n          <h2>Reminders (').concat(g.length,")</h2>\n          ").concat(g.map(t=>'\n            <div class="reminder">\n              <h3>'.concat(t.title,"</h3>\n              ").concat(t.description?"<p>".concat(t.description,"</p>"):"","\n              <p><strong>Priority:</strong> ").concat(t.priority,"</p>\n              <p><strong>Status:</strong> ").concat(t.status,"</p>\n              ").concat(t.dueDate?"<p><strong>Due:</strong> ".concat(e(t.dueDate),"</p>"):"","\n              ").concat(t.category?"<p><strong>Category:</strong> ".concat(t.category,"</p>"):"","\n            </div>\n          ")).join(""),'\n        </div>\n\n        <div class="section">\n          <h2>Conversations (').concat(h.length,")</h2>\n          ").concat(h.slice(0,5).map(t=>'\n            <div class="conversation">\n              <h3>'.concat(t.title||"Untitled Conversation",'</h3>\n              <p class="date">Started: ').concat(e(t.createdAt),"</p>\n              <p><strong>Messages:</strong> ").concat(t.messages.length,"</p>\n            </div>\n          ")).join(""),"\n          ").concat(h.length>5?"<p><em>... and ".concat(h.length-5," more conversations</em></p>"):"",'\n        </div>\n\n        <footer style="margin-top: 50px; border-top: 1px solid #e2e8f0; padding-top: 20px; text-align: center; color: #6b7280;">\n          <p>Generated by MyAi Personal Memory Companion</p>\n          <p>Export Date: ').concat(e(Date.now()),"</p>\n        </footer>\n      </body>\n      </html>\n    ")},b=((null==m?void 0:m.length)||0)+((null==h?void 0:h.length)||0)+((null==p?void 0:p.length)||0)+((null==u?void 0:u.length)||0)+((null==g?void 0:g.length)||0);return(0,l.FD)(S.lG,{children:[(0,l.Y)(S.zM,{asChild:!0,children:(0,l.FD)(s.$,{variant:"outline",className:"gap-2",children:[(0,l.Y)(Z,{className:"w-4 h-4"}),"Export Data"]})}),(0,l.FD)(S.Cf,{className:"max-w-md",children:[(0,l.Y)(S.c7,{children:(0,l.Y)(S.L3,{children:"Export Your Data"})}),(0,l.FD)("div",{className:"space-y-4 py-4",children:[(0,l.FD)("div",{className:"text-center",children:[(0,l.Y)("div",{className:"text-2xl font-bold text-blue-600",children:b}),(0,l.Y)("div",{className:"text-sm text-slate-600",children:"Total items to export"})]}),(0,l.FD)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,l.FD)("div",{className:"bg-slate-50 rounded-lg p-3 text-center",children:[(0,l.Y)("div",{className:"font-semibold",children:(null==m?void 0:m.length)||0}),(0,l.Y)("div",{children:"Memories"})]}),(0,l.FD)("div",{className:"bg-slate-50 rounded-lg p-3 text-center",children:[(0,l.Y)("div",{className:"font-semibold",children:(null==h?void 0:h.length)||0}),(0,l.Y)("div",{children:"Conversations"})]}),(0,l.FD)("div",{className:"bg-slate-50 rounded-lg p-3 text-center",children:[(0,l.Y)("div",{className:"font-semibold",children:(null==p?void 0:p.length)||0}),(0,l.Y)("div",{children:"Check-ins"})]}),(0,l.FD)("div",{className:"bg-slate-50 rounded-lg p-3 text-center",children:[(0,l.Y)("div",{className:"font-semibold",children:((null==u?void 0:u.length)||0)+((null==g?void 0:g.length)||0)}),(0,l.Y)("div",{children:"Family & Reminders"})]})]}),(0,l.FD)("div",{className:"space-y-3",children:[(0,l.Y)(r.Zp,{className:"cursor-pointer hover:shadow-md transition-shadow",children:(0,l.Y)(r.Wu,{className:"p-4",children:(0,l.FD)(s.$,{onClick:f,disabled:a||!v,className:"w-full justify-start gap-3",variant:"ghost",children:[a&&"json"===c?(0,l.Y)(q.A,{className:"w-5 h-5 animate-spin"}):(0,l.Y)(G,{className:"w-5 h-5"}),(0,l.FD)("div",{className:"text-left",children:[(0,l.Y)("div",{className:"font-medium",children:"JSON Export"}),(0,l.Y)("div",{className:"text-xs text-slate-500",children:"Complete data backup for import/restore"})]})]})})}),(0,l.Y)(r.Zp,{className:"cursor-pointer hover:shadow-md transition-shadow",children:(0,l.Y)(r.Wu,{className:"p-4",children:(0,l.FD)(s.$,{onClick:x,disabled:a||!v,className:"w-full justify-start gap-3",variant:"ghost",children:[a&&"pdf"===c?(0,l.Y)(q.A,{className:"w-5 h-5 animate-spin"}):(0,l.Y)(J.A,{className:"w-5 h-5"}),(0,l.FD)("div",{className:"text-left",children:[(0,l.Y)("div",{className:"font-medium",children:"PDF Report"}),(0,l.Y)("div",{className:"text-xs text-slate-500",children:"Formatted report for reading/printing"})]})]})})})]}),!v&&(0,l.FD)("div",{className:"text-center text-sm text-slate-500",children:[(0,l.Y)(q.A,{className:"w-4 h-4 animate-spin mx-auto mb-2"}),"Loading your data..."]})]})]})]})}var H=a(6874),W=a.n(H),K=a(9053);function Q(){var e;let[t,a]=(0,n.useState)("overview"),{userId:A,user:C}=(0,F.J)(),M=(0,D.IT)(k.F.memory.getMemoriesByUser,A?{}:"skip"),S=(0,D.IT)(k.F.conversations.getConversationsByUser,A?{}:"skip"),j=(0,D.IT)(k.F.family.getFamilyMembers,A?{userId:A}:"skip"),E=(0,D.IT)(k.F.checkIns.getCheckInsByUser,A?{userId:A}:"skip"),U=[{id:"home",label:"Home",icon:d.A,href:"/home"},{id:"activity",label:"Activity",icon:o.A,href:"/activity"},{id:"chat",label:"Chat",icon:m.A,href:"/chat"},{id:"calendar",label:"Calendar",icon:h.A,href:"/calendar"},{id:"profile",label:"Profile",icon:p.A,href:"/profile",active:!0}],P=[{label:"Memories Stored",value:(null==M?void 0:M.length)||0,icon:u.A,color:"text-blue-600",bgColor:"bg-blue-50"},{label:"Conversations",value:(null==S?void 0:S.length)||0,icon:m.A,color:"text-purple-600",bgColor:"bg-purple-50"},{label:"Family & Friends",value:(null==j?void 0:j.length)||0,icon:g.A,color:"text-green-600",bgColor:"bg-green-50"},{label:"Check-ins",value:(null==E?void 0:E.length)||0,icon:v.A,color:"text-pink-600",bgColor:"bg-pink-50"}],z=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),I=e=>e.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2);return(0,l.FD)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[(0,l.Y)("nav",{className:"bg-white/80 backdrop-blur-sm border-b border-slate-200 sticky top-0 z-50",children:(0,l.Y)("div",{className:"container mx-auto px-4",children:(0,l.FD)("div",{className:"flex items-center justify-between h-16",children:[(0,l.FD)("div",{className:"flex items-center gap-4",children:[(0,l.FD)("div",{className:"flex items-center gap-3",children:[(0,l.Y)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:(0,l.Y)(f.A,{className:"w-5 h-5 text-white"})}),(0,l.Y)("h1",{className:"text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"MyAi"})]}),(0,l.Y)("div",{className:"hidden md:flex items-center gap-1",children:U.map(e=>{let t=e.icon;return(0,l.Y)(W(),{href:e.href,children:(0,l.FD)(s.$,{variant:e.active?"secondary":"ghost",className:"gap-2 ".concat(e.active?"bg-blue-50 text-blue-700":""),children:[(0,l.Y)(t,{className:"w-4 h-4"}),e.label]})},e.id)})})]}),(0,l.FD)("div",{className:"flex items-center gap-3",children:[(0,l.Y)(s.$,{variant:"ghost",size:"sm",children:(0,l.Y)(x.A,{className:"w-4 h-4"})}),(0,l.Y)("div",{className:"w-8 h-8 bg-slate-200 rounded-full flex items-center justify-center",children:(0,l.Y)(p.A,{className:"w-4 h-4 text-slate-600"})})]})]})})}),(0,l.FD)("div",{className:"container mx-auto px-4 py-8",children:[(0,l.Y)("div",{className:"mb-8",children:(0,l.FD)("div",{className:"flex items-center justify-between mb-6",children:[(0,l.FD)("div",{children:[(0,l.Y)("h1",{className:"text-3xl font-bold text-slate-800",children:"Profile"}),(0,l.Y)("p",{className:"text-slate-600",children:"Manage your personal information and relationships"})]}),(0,l.FD)("div",{className:"flex items-center gap-3",children:[(0,l.FD)(s.$,{variant:"overview"===t?"default":"outline",onClick:()=>a("overview"),className:"gap-2",children:[(0,l.Y)(p.A,{className:"w-4 h-4"}),"Overview"]}),(0,l.FD)(s.$,{variant:"memories"===t?"default":"outline",onClick:()=>a("memories"),className:"gap-2",children:[(0,l.Y)(u.A,{className:"w-4 h-4"}),"Memories"]}),(0,l.FD)(s.$,{variant:"family"===t?"default":"outline",onClick:()=>a("family"),className:"gap-2",children:[(0,l.Y)(g.A,{className:"w-4 h-4"}),"Family & Friends"]})]})]})}),"overview"===t?(0,l.FD)("div",{className:"grid lg:grid-cols-3 gap-8",children:[(0,l.FD)("div",{className:"lg:col-span-1",children:[(0,l.Y)(r.Zp,{className:"text-center",children:(0,l.FD)(r.Wu,{className:"pt-6",children:[(0,l.FD)("div",{className:"relative inline-block mb-6",children:[(0,l.FD)(i.eu,{className:"w-24 h-24",children:[(0,l.Y)(i.BK,{src:null==C?void 0:C.profilePicture}),(0,l.Y)(i.q5,{className:"text-2xl bg-gradient-to-br from-blue-500 to-purple-600 text-white",children:(null==C?void 0:C.name)?I(C.name):"U"})]}),(0,l.Y)(s.$,{size:"sm",className:"absolute -bottom-2 -right-2 w-8 h-8 rounded-full p-0",children:(0,l.Y)(y.A,{className:"w-4 h-4"})})]}),(0,l.Y)("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:(null==C?void 0:C.name)||"User"}),(null==C?void 0:C.email)&&(0,l.FD)("div",{className:"flex items-center justify-center gap-2 text-slate-600 mb-4",children:[(0,l.Y)(b.A,{className:"w-4 h-4"}),(0,l.Y)("span",{className:"text-sm",children:C.email})]}),(0,l.FD)("div",{className:"flex items-center justify-center gap-2 text-slate-600 mb-6",children:[(0,l.Y)(N.A,{className:"w-4 h-4"}),(0,l.FD)("span",{className:"text-sm",children:["Member since ",(null==C?void 0:C.createdAt)?z(C.createdAt):"Unknown"]})]}),(0,l.FD)("div",{className:"space-y-3",children:[(0,l.FD)(s.$,{className:"w-full gap-2",children:[(0,l.Y)(y.A,{className:"w-4 h-4"}),"Edit Profile"]}),A&&(0,l.Y)(V,{userId:A})]})]})}),(0,l.FD)(r.Zp,{className:"mt-6",children:[(0,l.Y)(r.aR,{children:(0,l.FD)(r.ZB,{className:"flex items-center gap-2",children:[(0,l.Y)(x.A,{className:"w-5 h-5"}),"Preferences"]})}),(0,l.FD)(r.Wu,{className:"space-y-4",children:[(0,l.FD)("div",{className:"flex items-center justify-between",children:[(0,l.FD)("div",{className:"flex items-center gap-2",children:[(0,l.Y)(Y.A,{className:"w-4 h-4 text-green-600"}),(0,l.Y)("span",{className:"text-sm",children:"Privacy"})]}),(0,l.Y)(c.E,{variant:"secondary",className:"bg-green-100 text-green-800",children:"Protected"})]}),(0,l.FD)("div",{className:"flex items-center justify-between",children:[(0,l.FD)("div",{className:"flex items-center gap-2",children:[(0,l.Y)(u.A,{className:"w-4 h-4 text-blue-600"}),(0,l.Y)("span",{className:"text-sm",children:"AI Personality"})]}),(0,l.Y)(c.E,{variant:"outline",children:(null==C||null==(e=C.aiPersonality)?void 0:e.tone)||"Default"})]}),(0,l.FD)("div",{className:"flex items-center justify-between",children:[(0,l.FD)("div",{className:"flex items-center gap-2",children:[(0,l.Y)(w.A,{className:"w-4 h-4 text-purple-600"}),(0,l.Y)("span",{className:"text-sm",children:"Timezone"})]}),(0,l.Y)("span",{className:"text-sm text-slate-600",children:(null==C?void 0:C.timezone)||"Auto"})]})]})]})]}),(0,l.FD)("div",{className:"lg:col-span-2 space-y-6",children:[(0,l.Y)("div",{className:"grid md:grid-cols-2 gap-4",children:P.map((e,t)=>{let a=e.icon;return(0,l.Y)(r.Zp,{children:(0,l.Y)(r.Wu,{className:"p-6",children:(0,l.FD)("div",{className:"flex items-center gap-4",children:[(0,l.Y)("div",{className:"w-12 h-12 ".concat(e.bgColor," rounded-xl flex items-center justify-center"),children:(0,l.Y)(a,{className:"w-6 h-6 ".concat(e.color)})}),(0,l.FD)("div",{children:[(0,l.Y)("div",{className:"text-2xl font-bold ".concat(e.color),children:e.value}),(0,l.Y)("div",{className:"text-sm text-slate-600",children:e.label})]})]})})},t)})}),(0,l.FD)(r.Zp,{children:[(0,l.Y)(r.aR,{children:(0,l.FD)("div",{className:"flex items-center justify-between",children:[(0,l.FD)(r.ZB,{className:"flex items-center gap-2",children:[(0,l.Y)(u.A,{className:"w-5 h-5 text-blue-600"}),"Recent Memories"]}),(0,l.Y)(s.$,{variant:"outline",size:"sm",onClick:()=>a("memories"),children:"View All"})]})}),(0,l.Y)(r.Wu,{children:(0,l.FD)("div",{className:"space-y-4",children:[null==M?void 0:M.slice(0,5).map(e=>(0,l.FD)("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[(0,l.Y)("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center shrink-0",children:(0,l.Y)(u.A,{className:"w-4 h-4 text-blue-600"})}),(0,l.FD)("div",{className:"flex-1 min-w-0",children:[(0,l.Y)("div",{className:"text-sm font-medium truncate",children:e.summary||"Memory"}),(0,l.FD)("div",{className:"text-xs text-slate-500 mt-1",children:[z(e.createdAt)," • Importance: ",e.importance,"/10"]}),(0,l.Y)("div",{className:"flex gap-1 mt-2",children:e.tags.slice(0,3).map((e,t)=>(0,l.FD)(c.E,{variant:"outline",className:"text-xs",children:["#",e]},t))})]})]},e._id)),(!M||0===M.length)&&(0,l.FD)("div",{className:"text-center text-slate-500 py-8",children:[(0,l.Y)(u.A,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),(0,l.Y)("div",{className:"text-sm",children:"No memories stored yet"}),(0,l.Y)("div",{className:"text-xs mt-1",children:"Start chatting with MyAi to create memories"})]})]})})]}),(0,l.FD)(r.Zp,{children:[(0,l.Y)(r.aR,{children:(0,l.FD)("div",{className:"flex items-center justify-between",children:[(0,l.FD)(r.ZB,{className:"flex items-center gap-2",children:[(0,l.Y)(g.A,{className:"w-5 h-5 text-green-600"}),"Family & Friends"]}),(0,l.Y)(s.$,{variant:"outline",size:"sm",onClick:()=>a("family"),children:"View All"})]})}),(0,l.Y)(r.Wu,{children:(0,l.FD)("div",{className:"space-y-3",children:[null==j?void 0:j.slice(0,4).map(e=>(0,l.FD)("div",{className:"flex items-center gap-3 p-2 bg-slate-50 rounded-lg",children:[(0,l.Y)(i.eu,{className:"w-8 h-8",children:(0,l.Y)(i.q5,{className:"text-xs bg-green-100 text-green-700",children:I(e.name)})}),(0,l.FD)("div",{className:"flex-1",children:[(0,l.Y)("div",{className:"text-sm font-medium",children:e.name}),(0,l.Y)("div",{className:"text-xs text-slate-500",children:e.relationship})]}),e.birthday&&(0,l.FD)(c.E,{variant:"outline",className:"text-xs",children:[(0,l.Y)(h.A,{className:"w-3 h-3 mr-1"}),new Date(e.birthday).toLocaleDateString([],{month:"short",day:"numeric"})]})]},e._id)),(!j||0===j.length)&&(0,l.FD)("div",{className:"text-center text-slate-500 py-8",children:[(0,l.Y)(g.A,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),(0,l.Y)("div",{className:"text-sm",children:"No family members added yet"}),(0,l.Y)("div",{className:"text-xs mt-1",children:"Add people important to you"})]})]})})]})]})]}):"memories"===t?(0,l.Y)("div",{className:"bg-white rounded-xl shadow-sm border",children:A&&(0,l.Y)(R,{userId:A})}):(0,l.Y)("div",{className:"bg-white rounded-xl shadow-sm border",children:A&&(0,l.Y)(O,{userId:A})})]})]})}function X(){return(0,l.Y)(K.A,{children:(0,l.Y)(Q,{})})}},5300:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(157).A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},5554:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(157).A)("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]])},5731:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(157).A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},6424:(e,t,a)=>{"use strict";a.d(t,{F:()=>i});var l=a(5853),n=a(2115),s=a(7655),r=a(9434);let i=n.forwardRef((e,t)=>{let{className:a,children:n,...i}=e;return(0,l.FD)(s.bL,{ref:t,className:(0,r.cn)("relative overflow-hidden",a),...i,children:[(0,l.Y)(s.LM,{className:"h-full w-full rounded-[inherit]",children:n}),(0,l.Y)(c,{}),(0,l.Y)(s.OK,{})]})});i.displayName=s.bL.displayName;let c=n.forwardRef((e,t)=>{let{className:a,orientation:n="vertical",...i}=e;return(0,l.Y)(s.VM,{ref:t,orientation:n,className:(0,r.cn)("flex touch-none select-none transition-colors","vertical"===n&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===n&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...i,children:(0,l.Y)(s.lr,{className:"relative flex-1 rounded-full bg-border"})})});c.displayName=s.VM.displayName},6857:(e,t,a)=>{"use strict";a.d(t,{F:()=>l});let l=a(1534).dp},8539:(e,t,a)=>{"use strict";a.d(t,{T:()=>r});var l=a(5853),n=a(2115),s=a(9434);let r=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.Y)("textarea",{className:(0,s.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});r.displayName="Textarea"},9053:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var l=a(5853),n=a(2115),s=a(5695),r=a(1255),i=a(4601),c=a(172);function d(e){let{children:t}=e,{isAuthenticated:a,isLoading:d}=(0,r.a)(),o=(0,s.useRouter)();return((0,n.useEffect)(()=>{d||a||o.push("/home")},[a,d,o]),d)?(0,l.Y)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-purple-50 flex items-center justify-center",children:(0,l.FD)("div",{className:"text-center",children:[(0,l.FD)("div",{className:"flex items-center justify-center gap-3 mb-4",children:[(0,l.Y)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center",children:(0,l.Y)(i.A,{className:"w-7 h-7 text-white"})}),(0,l.Y)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"MyAi"})]}),(0,l.Y)("p",{className:"text-slate-600 mb-4",children:"Loading your personal companion..."}),(0,l.Y)("div",{className:"flex items-center justify-center",children:(0,l.Y)(c.A,{className:"w-6 h-6 animate-spin text-blue-600"})})]})}):a?(0,l.Y)(l.FK,{children:t}):null}},9637:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(157).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[853,273,935,895,655,969,420,441,684,358],()=>t(2298)),_N_E=e.O()}]);